ESTRUTURA DE PASTAS
text

src/
‚îú‚îÄ‚îÄ story/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StoryCreator.tsx         ‚≠ê Componente principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MediaSelector.tsx        üì∏ Sele√ß√£o de m√≠dia
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StoryEditor.tsx          ‚úèÔ∏è Editor principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StoryPreview.tsx         üëÅÔ∏è Preview do story
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tools/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TextTool.tsx         üìù Editor de texto
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DrawingTool.tsx      üé® Desenho
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FiltersTool.tsx      üåà Filtros
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StickersTool.tsx     üòÄ Stickers
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CropTool.tsx         ‚úÇÔ∏è Cortar
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ InteractiveTool.tsx  üí¨ Interativos
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Toolbar.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ColorPicker.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FontSelector.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PrivacySelector.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AnimatedButton.tsx
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ canvas/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ DrawCanvas.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ TextElement.tsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ StickerElement.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useStoryEditor.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useHistoryManager.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useGestures.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useMediaPicker.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ imageFilters.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ canvasHelpers.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gestureHelpers.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storageHelpers.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ styles/
‚îÇ       ‚îú‚îÄ‚îÄ theme.ts
‚îÇ       ‚îî‚îÄ‚îÄ animations.ts
üé® 1. TYPES/INDEX.TS (Base de tudo)
TypeScript

// src/story/types/index.ts

export type FilterType = 
  | 'original' 
  | 'vintage' 
  | 'pb' 
  | 'sepia' 
  | 'vibrante' 
  | 'frio' 
  | 'quente' 
  | 'desbotado' 
  | 'dramatico' 
  | 'retro';

export type PrivacyAudience = 
  | 'todos' 
  | 'amigos' 
  | 'amigos_proximos' 
  | 'amigos_exceto' 
  | 'apenas';

export type BrushType = 'normal' | 'marcador' | 'neon' | 'caneta';
export type FontFamily = 'default' | 'bold' | 'italic' | 'serif' | 'script' | 'modern';
export type TextAlign = 'left' | 'center' | 'right';
export type AspectRatio = '1:1' | '4:3' | '16:9' | '9:16' | 'free';

// Elementos base
export interface BaseElement {
  id: string;
  type: string;
  x: number;
  y: number;
  rotation?: number;
  scale?: number;
  zIndex?: number;
}

// Elementos de conte√∫do
export interface TextElement extends BaseElement {
  type: 'text';
  text: string;
  fontSize: number;
  fontFamily: FontFamily;
  color: string;
  backgroundColor?: string;
  hasOutline?: boolean;
  outlineColor?: string;
  align: TextAlign;
  width?: number;
  height?: number;
}

export interface DrawElement extends BaseElement {
  type: 'draw';
  data: {
    path: string;
    color: string;
    width: number;
    opacity: number;
    brushType: BrushType;
  };
}

export interface StickerElement extends BaseElement {
  type: 'sticker';
  stickerUrl: string;
  width?: number;
  height?: number;
}

export interface MentionElement extends BaseElement {
  type: 'mention';
  userId: string;
  userName: string;
}

export interface LocationElement extends BaseElement {
  type: 'location';
  name: string;
  latitude?: number;
  longitude?: number;
}

export interface PollElement extends BaseElement {
  type: 'poll';
  question: string;
  options: string[];
}

export interface QuestionElement extends BaseElement {
  type: 'question';
  question: string;
}

export interface CountdownElement extends BaseElement {
  type: 'countdown';
  targetDate: string;
  title?: string;
}

export interface DateTimeElement extends BaseElement {
  type: 'datetime';
  format: 'date' | 'time' | 'datetime';
}

export type StoryElement = 
  | TextElement 
  | DrawElement 
  | StickerElement 
  | MentionElement 
  | LocationElement 
  | PollElement 
  | QuestionElement 
  | CountdownElement 
  | DateTimeElement;

// Configura√ß√µes
export interface FilterConfig {
  brightness?: number;
  contrast?: number;
  saturation?: number;
  sepia?: number;
  grayscale?: number;
  hue?: number;
  blur?: number;
  opacity?: number;
}

export interface Crop {
  ratio: AspectRatio;
  x: number;
  y: number;
  width: number;
  height: number;
  zoom?: number;
  rotation?: number;
  flipHorizontal?: boolean;
  flipVertical?: boolean;
}

export interface PrivacySettings {
  audience: PrivacyAudience;
  allowReplies: boolean;
  allowSharing: boolean;
  excludedUserIds?: string[];
  includedUserIds?: string[];
}

export interface StoryComposition {
  elements: StoryElement[];
  filter?: FilterType;
  filterConfig?: FilterConfig;
  crop?: Crop;
  backgroundColor?: string;
  backgroundGradient?: string[];
}

export interface StoryDraft {
  id: string;
  imageUri: string;
  videoUri?: string;
  composition: StoryComposition;
  privacy: PrivacySettings;
  duration: number;
  createdAt: Date;
  lastModified: Date;
  thumbnail?: string;
}

export interface StoryData {
  id: string;
  userId: string;
  mediaUrl: string;
  thumbnailUrl?: string;
  composition: StoryComposition;
  privacy: PrivacySettings;
  duration: number;
  viewsCount: number;
  createdAt: Date;
  expiresAt: Date;
}
üé® 2. STYLES/THEME.TS
TypeScript

// src/story/styles/theme.ts

export const colors = {
  // Primary
  primary: '#16a34a',
  primaryLight: '#22c55e',
  primaryDark: '#15803d',
  primaryGradient: ['#16a34a', '#22c55e'],
  
  // Background
  bgPrimary: '#000000',
  bgSecondary: '#111827',
  bgTertiary: '#1f2937',
  bgQuaternary: '#374151',
  
  // Surface
  surface: '#ffffff',
  surfaceDark: '#f9fafb',
  surfaceLight: '#f3f4f6',
  
  // Text
  textPrimary: '#ffffff',
  textSecondary: '#d1d5db',
  textTertiary: '#9ca3af',
  textDark: '#111827',
  
  // Accent
  success: '#10b981',
  error: '#ef4444',
  warning: '#f59e0b',
  info: '#3b82f6',
  
  // Borders
  border: '#374151',
  borderLight: '#e5e7eb',
  
  // Overlay
  overlay: 'rgba(0, 0, 0, 0.7)',
  overlayLight: 'rgba(0, 0, 0, 0.5)',
  
  // Gradients
  gradientPrimary: ['#16a34a', '#22c55e'],
  gradientDark: ['#111827', '#000000'],
  gradientOverlay: ['transparent', 'rgba(0, 0, 0, 0.8)'],
};

export const spacing = {
  xs: 4,
  sm: 8,
  md: 12,
  lg: 16,
  xl: 20,
  xxl: 24,
  xxxl: 32,
};

export const borderRadius = {
  sm: 8,
  md: 12,
  lg: 16,
  xl: 20,
  xxl: 24,
  full: 9999,
};

export const typography = {
  h1: {
    fontSize: 32,
    fontWeight: '700' as const,
    lineHeight: 40,
  },
  h2: {
    fontSize: 24,
    fontWeight: '700' as const,
    lineHeight: 32,
  },
  h3: {
    fontSize: 20,
    fontWeight: '600' as const,
    lineHeight: 28,
  },
  h4: {
    fontSize: 18,
    fontWeight: '600' as const,
    lineHeight: 24,
  },
  body: {
    fontSize: 16,
    fontWeight: '400' as const,
    lineHeight: 24,
  },
  bodySmall: {
    fontSize: 14,
    fontWeight: '400' as const,
    lineHeight: 20,
  },
  caption: {
    fontSize: 12,
    fontWeight: '400' as const,
    lineHeight: 16,
  },
  button: {
    fontSize: 15,
    fontWeight: '600' as const,
    lineHeight: 20,
  },
};

export const shadows = {
  sm: {
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 1 },
    shadowOpacity: 0.05,
    shadowRadius: 2,
    elevation: 1,
  },
  md: {
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.1,
    shadowRadius: 4,
    elevation: 3,
  },
  lg: {
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 4 },
    shadowOpacity: 0.15,
    shadowRadius: 8,
    elevation: 5,
  },
  xl: {
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 8 },
    shadowOpacity: 0.2,
    shadowRadius: 16,
    elevation: 8,
  },
};

export default {
  colors,
  spacing,
  borderRadius,
  typography,
  shadows,
};
‚ú® 3. STYLES/ANIMATIONS.TS
TypeScript

// src/story/styles/animations.ts

export const ANIMATION_DURATION = {
  fast: 200,
  normal: 300,
  slow: 500,
};

export const SPRING_CONFIG = {
  damping: 15,
  mass: 1,
  stiffness: 150,
};

export const TIMING_CONFIG = {
  duration: 300,
  useNativeDriver: true,
};

export const slideIn = {
  from: { translateY: 1000, opacity: 0 },
  to: { translateY: 0, opacity: 1 },
};

export const slideOut = {
  from: { translateY: 0, opacity: 1 },
  to: { translateY: 1000, opacity: 0 },
};

export const fadeIn = {
  from: { opacity: 0 },
  to: { opacity: 1 },
};

export const fadeOut = {
  from: { opacity: 1 },
  to: { opacity: 0 },
};

export const scaleIn = {
  from: { scale: 0.8, opacity: 0 },
  to: { scale: 1, opacity: 1 },
};

export const scaleOut = {
  from: { scale: 1, opacity: 1 },
  to: { scale: 0.8, opacity: 0 },
};




TODOS OS COMPONENTES TSX - M√ìDULO COMPLETO
Vou enviar TUDO agora! Preparado? üöÄ

üì± 1. STORYCREATOR.TSX (Componente Principal)
TypeScript

// src/story/components/StoryCreator.tsx

import React, { useState } from 'react';
import {
  View,
  StyleSheet,
  Modal,
  StatusBar,
  TouchableOpacity,
  Text,
} from 'react-native';
import { LinearGradient } from 'expo-linear-gradient';
import { BlurView } from 'expo-blur';
import { MaterialCommunityIcons } from '@expo/vector-icons';
import MediaSelector from './MediaSelector';
import StoryEditor from './StoryEditor';
import { StoryComposition } from '../types';
import theme from '../styles/theme';

interface StoryCreatorProps {
  visible: boolean;
  onClose: () => void;
  onPublish: (composition: StoryComposition, mediaUri: string) => void;
}

type CreatorStep = 'media' | 'editor';

export default function StoryCreator({
  visible,
  onClose,
  onPublish,
}: StoryCreatorProps) {
  const [step, setStep] = useState<CreatorStep>('media');
  const [selectedMediaUri, setSelectedMediaUri] = useState<string>('');

  const handleMediaSelected = (uri: string) => {
    setSelectedMediaUri(uri);
    setStep('editor');
  };

  const handleEditorCancel = () => {
    setStep('media');
    setSelectedMediaUri('');
  };

  const handlePublish = (composition: StoryComposition) => {
    onPublish(composition, selectedMediaUri);
    handleClose();
  };

  const handleClose = () => {
    setStep('media');
    setSelectedMediaUri('');
    onClose();
  };

  return (
    <Modal
      visible={visible}
      animationType="fade"
      presentationStyle="fullScreen"
      onRequestClose={handleClose}
      statusBarTranslucent
    >
      <StatusBar barStyle="light-content" backgroundColor="transparent" translucent />
      
      <View style={styles.container}>
        <LinearGradient
          colors={theme.colors.gradientDark}
          style={StyleSheet.absoluteFillObject}
        />

        {step === 'media' && (
          <MediaSelector
            onMediaSelected={handleMediaSelected}
            onCancel={handleClose}
          />
        )}

        {step === 'editor' && selectedMediaUri && (
          <StoryEditor
            mediaUri={selectedMediaUri}
            onPublish={handlePublish}
            onCancel={handleEditorCancel}
          />
        )}
      </View>
    </Modal>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: theme.colors.bgPrimary,
  },
});
üì∏ 2. MEDIASELECTOR.TSX (Sele√ß√£o de M√≠dia)
TypeScript

// src/story/components/MediaSelector.tsx

import React, { useState } from 'react';
import {
  View,
  StyleSheet,
  TouchableOpacity,
  Text,
  Alert,
  ActivityIndicator,
  Animated,
} from 'react-native';
import * as ImagePicker from 'expo-image-picker';
import { LinearGradient } from 'expo-linear-gradient';
import { BlurView } from 'expo-blur';
import { MaterialCommunityIcons } from '@expo/vector-icons';
import theme from '../styles/theme';

interface MediaSelectorProps {
  onMediaSelected: (uri: string) => void;
  onCancel: () => void;
}

export default function MediaSelector({
  onMediaSelected,
  onCancel,
}: MediaSelectorProps) {
  const [loading, setLoading] = useState(false);
  const scaleAnim = new Animated.Value(1);

  const requestPermissions = async (type: 'camera' | 'gallery') => {
    try {
      const permission =
        type === 'camera'
          ? await ImagePicker.requestCameraPermissionsAsync()
          : await ImagePicker.requestMediaLibraryPermissionsAsync();

      if (permission.status !== 'granted') {
        Alert.alert(
          'Permiss√£o Negada',
          `Voc√™ precisa conceder permiss√£o de ${
            type === 'camera' ? 'c√¢mera' : 'galeria'
          } para usar essa funcionalidade.`
        );
        return false;
      }
      return true;
    } catch (error) {
      console.error('Erro ao solicitar permiss√£o:', error);
      return false;
    }
  };

  const handleCamera = async () => {
    const hasPermission = await requestPermissions('camera');
    if (!hasPermission) return;

    setLoading(true);
    try {
      const result = await ImagePicker.launchCameraAsync({
        mediaTypes: ImagePicker.MediaTypeOptions.All,
        allowsEditing: false,
        quality: 1,
      });

      if (!result.canceled && result.assets && result.assets.length > 0) {
        onMediaSelected(result.assets[0].uri);
      }
    } catch (error) {
      console.error('Erro ao capturar m√≠dia:', error);
      Alert.alert('Erro', 'N√£o foi poss√≠vel capturar a m√≠dia');
    } finally {
      setLoading(false);
    }
  };

  const handleGallery = async () => {
    const hasPermission = await requestPermissions('gallery');
    if (!hasPermission) return;

    setLoading(true);
    try {
      const result = await ImagePicker.launchImageLibraryAsync({
        mediaTypes: ImagePicker.MediaTypeOptions.All,
        allowsEditing: false,
        quality: 1,
      });

      if (!result.canceled && result.assets && result.assets.length > 0) {
        onMediaSelected(result.assets[0].uri);
      }
    } catch (error) {
      console.error('Erro ao selecionar m√≠dia:', error);
      Alert.alert('Erro', 'N√£o foi poss√≠vel selecionar a m√≠dia');
    } finally {
      setLoading(false);
    }
  };

  const animateButton = (callback: () => void) => {
    Animated.sequence([
      Animated.timing(scaleAnim, {
        toValue: 0.95,
        duration: 100,
        useNativeDriver: true,
      }),
      Animated.timing(scaleAnim, {
        toValue: 1,
        duration: 100,
        useNativeDriver: true,
      }),
    ]).start(callback);
  };

  return (
    <View style={styles.container}>
      {/* Header */}
      <View style={styles.header}>
        <Text style={styles.title}>Criar Story</Text>
        <TouchableOpacity
          onPress={onCancel}
          style={styles.closeButton}
          disabled={loading}
        >
          <MaterialCommunityIcons name="close" size={28} color="#fff" />
        </TouchableOpacity>
      </View>

      {/* Options */}
      <View style={styles.content}>
        <Text style={styles.subtitle}>Como deseja criar seu story?</Text>

        {/* Camera Option */}
        <TouchableOpacity
          style={styles.optionCard}
          onPress={() => animateButton(handleCamera)}
          disabled={loading}
          activeOpacity={0.9}
        >
          <BlurView intensity={20} style={styles.optionBlur}>
            <LinearGradient
              colors={['rgba(22, 163, 74, 0.3)', 'rgba(22, 163, 74, 0.1)']}
              style={styles.optionGradient}
            >
              <View style={styles.optionIconContainer}>
                {loading ? (
                  <ActivityIndicator size="large" color="#fff" />
                ) : (
                  <MaterialCommunityIcons name="camera" size={56} color="#fff" />
                )}
              </View>
              <View style={styles.optionTextContainer}>
                <Text style={styles.optionTitle}>C√¢mera</Text>
                <Text style={styles.optionDescription}>
                  Tire uma foto ou grave um v√≠deo
                </Text>
              </View>
              <MaterialCommunityIcons
                name="chevron-right"
                size={32}
                color="rgba(255, 255, 255, 0.6)"
              />
            </LinearGradient>
          </BlurView>
        </TouchableOpacity>

        {/* Gallery Option */}
        <TouchableOpacity
          style={styles.optionCard}
          onPress={() => animateButton(handleGallery)}
          disabled={loading}
          activeOpacity={0.9}
        >
          <BlurView intensity={20} style={styles.optionBlur}>
            <LinearGradient
              colors={['rgba(59, 130, 246, 0.3)', 'rgba(59, 130, 246, 0.1)']}
              style={styles.optionGradient}
            >
              <View style={styles.optionIconContainer}>
                {loading ? (
                  <ActivityIndicator size="large" color="#fff" />
                ) : (
                  <MaterialCommunityIcons
                    name="image-multiple"
                    size={56}
                    color="#fff"
                  />
                )}
              </View>
              <View style={styles.optionTextContainer}>
                <Text style={styles.optionTitle}>Galeria</Text>
                <Text style={styles.optionDescription}>
                  Escolha uma foto ou v√≠deo
                </Text>
              </View>
              <MaterialCommunityIcons
                name="chevron-right"
                size={32}
                color="rgba(255, 255, 255, 0.6)"
              />
            </LinearGradient>
          </BlurView>
        </TouchableOpacity>

        {/* Create with Text (Coming Soon) */}
        <TouchableOpacity
          style={[styles.optionCard, styles.optionDisabled]}
          disabled
          activeOpacity={0.9}
        >
          <BlurView intensity={10} style={styles.optionBlur}>
            <View style={styles.optionGradient}>
              <View style={styles.optionIconContainer}>
                <MaterialCommunityIcons
                  name="format-text"
                  size={56}
                  color="rgba(255, 255, 255, 0.3)"
                />
              </View>
              <View style={styles.optionTextContainer}>
                <Text style={[styles.optionTitle, styles.optionTitleDisabled]}>
                  Criar com Texto
                </Text>
                <Text style={styles.optionDescription}>Em breve</Text>
              </View>
            </View>
          </BlurView>
        </TouchableOpacity>
      </View>

      {/* Footer Info */}
      <View style={styles.footer}>
        <View style={styles.infoCard}>
          <MaterialCommunityIcons name="information" size={20} color="#3b82f6" />
          <Text style={styles.infoText}>
            Seu story ficar√° vis√≠vel por 24 horas
          </Text>
        </View>
      </View>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
  header: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    paddingHorizontal: theme.spacing.lg,
    paddingTop: 60,
    paddingBottom: theme.spacing.lg,
  },
  title: {
    ...theme.typography.h2,
    color: theme.colors.textPrimary,
  },
  closeButton: {
    width: 44,
    height: 44,
    borderRadius: theme.borderRadius.full,
    backgroundColor: 'rgba(255, 255, 255, 0.1)',
    alignItems: 'center',
    justifyContent: 'center',
  },
  content: {
    flex: 1,
    paddingHorizontal: theme.spacing.lg,
    paddingTop: theme.spacing.xl,
  },
  subtitle: {
    ...theme.typography.h4,
    color: theme.colors.textSecondary,
    marginBottom: theme.spacing.xxl,
  },
  optionCard: {
    marginBottom: theme.spacing.lg,
    borderRadius: theme.borderRadius.xl,
    overflow: 'hidden',
    ...theme.shadows.lg,
  },
  optionBlur: {
    borderRadius: theme.borderRadius.xl,
    overflow: 'hidden',
  },
  optionGradient: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingVertical: theme.spacing.xxl,
    paddingHorizontal: theme.spacing.xl,
    gap: theme.spacing.lg,
  },
  optionIconContainer: {
    width: 80,
    height: 80,
    borderRadius: theme.borderRadius.xl,
    backgroundColor: 'rgba(255, 255, 255, 0.1)',
    alignItems: 'center',
    justifyContent: 'center',
  },
  optionTextContainer: {
    flex: 1,
  },
  optionTitle: {
    ...theme.typography.h3,
    color: theme.colors.textPrimary,
    marginBottom: 4,
  },
  optionTitleDisabled: {
    color: 'rgba(255, 255, 255, 0.3)',
  },
  optionDescription: {
    ...theme.typography.bodySmall,
    color: theme.colors.textSecondary,
  },
  optionDisabled: {
    opacity: 0.5,
  },
  footer: {
    paddingHorizontal: theme.spacing.lg,
    paddingBottom: theme.spacing.xxxl,
  },
  infoCard: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: theme.spacing.md,
    backgroundColor: 'rgba(59, 130, 246, 0.1)',
    paddingVertical: theme.spacing.md,
    paddingHorizontal: theme.spacing.lg,
    borderRadius: theme.borderRadius.md,
    borderWidth: 1,
    borderColor: 'rgba(59, 130, 246, 0.2)',
  },
  infoText: {
    ...theme.typography.bodySmall,
    color: theme.colors.textSecondary,
    flex: 1,
  },
});
‚úèÔ∏è 3. STORYEDITOR.TSX (Editor Principal)
TypeScript

// src/story/components/StoryEditor.tsx

import React, { useState, useRef } from 'react';
import {
  View,
  StyleSheet,
  TouchableOpacity,
  Text,
  Image,
  ScrollView,
  Animated,
  Dimensions,
} from 'react-native';
import { LinearGradient } from 'expo-linear-gradient';
import { BlurView } from 'expo-blur';
import { MaterialCommunityIcons } from '@expo/vector-icons';
import { GestureHandlerRootView } from 'react-native-gesture-handler';

import TextTool from './tools/TextTool';
import DrawingTool from './tools/DrawingTool';
import FiltersTool from './tools/FiltersTool';
import StickersTool from './tools/StickersTool';
import CropTool from './tools/CropTool';
import InteractiveTool from './tools/InteractiveTool';
import PrivacySelector from './ui/PrivacySelector';

import {
  StoryComposition,
  StoryElement,
  FilterType,
  PrivacySettings,
  TextElement,
} from '../types';
import theme from '../styles/theme';

const { width: SCREEN_WIDTH, height: SCREEN_HEIGHT } = Dimensions.get('window');

interface StoryEditorProps {
  mediaUri: string;
  onPublish: (composition: StoryComposition) => void;
  onCancel: () => void;
}

type ActiveTool =
  | 'none'
  | 'text'
  | 'draw'
  | 'filters'
  | 'stickers'
  | 'crop'
  | 'interactive'
  | 'privacy';

interface Tool {
  id: ActiveTool;
  label: string;
  icon: string;
  color: string;
}

const TOOLS: Tool[] = [
  { id: 'text', label: 'Texto', icon: 'format-text', color: '#3b82f6' },
  { id: 'draw', label: 'Desenhar', icon: 'brush', color: '#ec4899' },
  { id: 'stickers', label: 'Stickers', icon: 'sticker-emoji', color: '#f59e0b' },
  { id: 'filters', label: 'Filtros', icon: 'palette', color: '#8b5cf6' },
  { id: 'interactive', label: 'Mais', icon: 'plus-circle', color: '#10b981' },
];

export default function StoryEditor({
  mediaUri,
  onPublish,
  onCancel,
}: StoryEditorProps) {
  const [elements, setElements] = useState<StoryElement[]>([]);
  const [activeTool, setActiveTool] = useState<ActiveTool>('none');
  const [filter, setFilter] = useState<FilterType>('original');
  const [privacy, setPrivacy] = useState<PrivacySettings>({
    audience: 'amigos',
    allowReplies: true,
    allowSharing: true,
  });

  const toolbarAnim = useRef(new Animated.Value(0)).current;

  const handleAddElement = (element: StoryElement) => {
    setElements([...elements, element]);
    setActiveTool('none');
  };

  const handleUpdateElement = (updatedElement: StoryElement) => {
    setElements(
      elements.map((el) =>
        el.id === updatedElement.id ? updatedElement : el
      )
    );
  };

  const handleDeleteElement = (id: string) => {
    setElements(elements.filter((el) => el.id !== id));
  };

  const handlePublish = () => {
    const composition: StoryComposition = {
      elements,
      filter,
    };
    onPublish(composition);
  };

  const openTool = (tool: ActiveTool) => {
    setActiveTool(tool);
    Animated.spring(toolbarAnim, {
      toValue: 1,
      useNativeDriver: true,
    }).start();
  };

  const closeTool = () => {
    Animated.spring(toolbarAnim, {
      toValue: 0,
      useNativeDriver: true,
    }).start(() => setActiveTool('none'));
  };

  return (
    <GestureHandlerRootView style={styles.container}>
      <View style={styles.container}>
        {/* Canvas Area */}
        <View style={styles.canvas}>
          <Image source={{ uri: mediaUri }} style={styles.backgroundImage} />
          
          {/* Gradient Overlay */}
          <LinearGradient
            colors={['transparent', 'rgba(0, 0, 0, 0.3)']}
            style={styles.gradientOverlay}
          />

          {/* Rendered Elements */}
          <View style={styles.elementsContainer}>
            {elements.map((element) => {
              if (element.type === 'text') {
                const textEl = element as TextElement;
                return (
                  <TouchableOpacity
                    key={element.id}
                    style={[
                      styles.textElement,
                      {
                        left: textEl.x,
                        top: textEl.y,
                        transform: [
                          { rotate: `${textEl.rotation || 0}deg` },
                          { scale: textEl.scale || 1 },
                        ],
                      },
                    ]}
                    onLongPress={() => handleDeleteElement(element.id)}
                  >
                    <Text
                      style={{
                        fontSize: textEl.fontSize,
                        color: textEl.color,
                        fontWeight: textEl.fontFamily === 'bold' ? '700' : '400',
                        fontStyle: textEl.fontFamily === 'italic' ? 'italic' : 'normal',
                        textAlign: textEl.align,
                        backgroundColor: textEl.backgroundColor || 'transparent',
                        paddingHorizontal: 8,
                        paddingVertical: 4,
                      }}
                    >
                      {textEl.text}
                    </Text>
                  </TouchableOpacity>
                );
              }
              return null;
            })}
          </View>

          {/* Top Actions */}
          <View style={styles.topBar}>
            <TouchableOpacity onPress={onCancel} style={styles.topButton}>
              <BlurView intensity={20} style={styles.topButtonBlur}>
                <MaterialCommunityIcons name="close" size={24} color="#fff" />
              </BlurView>
            </TouchableOpacity>

            <View style={styles.topRight}>
              <TouchableOpacity
                onPress={() => openTool('privacy')}
                style={styles.topButton}
              >
                <BlurView intensity={20} style={styles.topButtonBlur}>
                  <MaterialCommunityIcons name="lock" size={20} color="#fff" />
                </BlurView>
              </TouchableOpacity>
            </View>
          </View>
        </View>

        {/* Toolbar */}
        <View style={styles.toolbar}>
          <BlurView intensity={30} style={styles.toolbarBlur}>
            <ScrollView
              horizontal
              showsHorizontalScrollIndicator={false}
              contentContainerStyle={styles.toolbarContent}
            >
              {TOOLS.map((tool) => (
                <TouchableOpacity
                  key={tool.id}
                  style={styles.toolButton}
                  onPress={() => openTool(tool.id)}
                >
                  <View
                    style={[
                      styles.toolIcon,
                      { backgroundColor: tool.color + '20' },
                    ]}
                  >
                    <MaterialCommunityIcons
                      name={tool.icon as any}
                      size={24}
                      color={tool.color}
                    />
                  </View>
                  <Text style={styles.toolLabel}>{tool.label}</Text>
                </TouchableOpacity>
              ))}
            </ScrollView>
          </BlurView>
        </View>

        {/* Publish Button */}
        <View style={styles.publishContainer}>
          <TouchableOpacity
            style={styles.publishButton}
            onPress={handlePublish}
            activeOpacity={0.9}
          >
            <LinearGradient
              colors={theme.colors.gradientPrimary}
              style={styles.publishGradient}
              start={{ x: 0, y: 0 }}
              end={{ x: 1, y: 0 }}
            >
              <MaterialCommunityIcons name="send" size={20} color="#fff" />
              <Text style={styles.publishText}>Publicar Story</Text>
            </LinearGradient>
          </TouchableOpacity>
        </View>

        {/* Tools Modals */}
        {activeTool === 'text' && (
          <TextTool
            visible={true}
            onConfirm={handleAddElement}
            onCancel={closeTool}
          />
        )}

        {activeTool === 'draw' && (
          <DrawingTool
            visible={true}
            onConfirm={(drawElements) => {
              drawElements.forEach(handleAddElement);
              closeTool();
            }}
            onCancel={closeTool}
          />
        )}

        {activeTool === 'filters' && (
          <FiltersTool
            visible={true}
            imageUri={mediaUri}
            currentFilter={filter}
            onConfirm={(selectedFilter) => {
              setFilter(selectedFilter);
              closeTool();
            }}
            onCancel={closeTool}
          />
        )}

        {activeTool === 'stickers' && (
          <StickersTool
            visible={true}
            onSelect={handleAddElement}
            onCancel={closeTool}
          />
        )}

        {activeTool === 'interactive' && (
          <InteractiveTool
            visible={true}
            onSelect={handleAddElement}
            onCancel={closeTool}
          />
        )}

        {activeTool === 'privacy' && (
          <PrivacySelector
            visible={true}
            initialSettings={privacy}
            onConfirm={(settings) => {
              setPrivacy(settings);
              closeTool();
            }}
            onCancel={closeTool}
          />
        )}
      </View>
    </GestureHandlerRootView>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: theme.colors.bgPrimary,
  },
  canvas: {
    flex: 1,
    position: 'relative',
  },
  backgroundImage: {
    width: SCREEN_WIDTH,
    height: SCREEN_HEIGHT,
    resizeMode: 'cover',
  },
  gradientOverlay: {
    ...StyleSheet.absoluteFillObject,
  },
  elementsContainer: {
    ...StyleSheet.absoluteFillObject,
  },
  textElement: {
    position: 'absolute',
  },
  topBar: {
    position: 'absolute',
    top: 60,
    left: 0,
    right: 0,
    flexDirection: 'row',
    justifyContent: 'space-between',
    paddingHorizontal: theme.spacing.lg,
  },
  topButton: {
    width: 44,
    height: 44,
    borderRadius: theme.borderRadius.full,
    overflow: 'hidden',
  },
  topButtonBlur: {
    width: '100%',
    height: '100%',
    alignItems: 'center',
    justifyContent: 'center',
  },
  topRight: {
    flexDirection: 'row',
    gap: theme.spacing.sm,
  },
  toolbar: {
    position: 'absolute',
    bottom: 100,
    left: 0,
    right: 0,
    height: 100,
  },
  toolbarBlur: {
    flex: 1,
  },
  toolbarContent: {
    paddingHorizontal: theme.spacing.lg,
    paddingVertical: theme.spacing.md,
    gap: theme.spacing.md,
  },
  toolButton: {
    alignItems: 'center',
    gap: 6,
  },
  toolIcon: {
    width: 56,
    height: 56,
    borderRadius: theme.borderRadius.lg,
    alignItems: 'center',
    justifyContent: 'center',
  },
  toolLabel: {
    ...theme.typography.caption,
    color: theme.colors.textPrimary,
    fontWeight: '600',
  },
  publishContainer: {
    position: 'absolute',
    bottom: 0,
    left: 0,
    right: 0,
    paddingHorizontal: theme.spacing.lg,
    paddingBottom: theme.spacing.xxxl,
  },
  publishButton: {
    borderRadius: theme.borderRadius.lg,
    overflow: 'hidden',
    ...theme.shadows.xl,
  },
  publishGradient: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    gap: theme.spacing.sm,
    paddingVertical: theme.spacing.lg,
  },
  publishText: {
    ...theme.typography.button,
    color: '#fff',
  },
});


CONTINUANDO - TODAS AS FERRAMENTAS (TOOLS)
üìù 4. TEXTTOOL.TSX (Editor de Texto)
TypeScript

// src/story/components/tools/TextTool.tsx

import React, { useState } from 'react';
import {
  View,
  StyleSheet,
  TouchableOpacity,
  Text,
  Modal,
  TextInput,
  ScrollView,
  Animated,
} from 'react-native';
import { LinearGradient } from 'expo-linear-gradient';
import { BlurView } from 'expo-blur';
import { MaterialCommunityIcons } from '@expo/vector-icons';
import Slider from '@react-native-community/slider';
import { TextElement, FontFamily, TextAlign } from '../../types';
import theme from '../../styles/theme';

interface TextToolProps {
  visible: boolean;
  onConfirm: (element: TextElement) => void;
  onCancel: () => void;
  initialText?: TextElement;
}

interface Font {
  id: FontFamily;
  label: string;
  preview: string;
}

const FONTS: Font[] = [
  { id: 'default', label: 'Padr√£o', preview: 'Aa' },
  { id: 'bold', label: 'Negrito', preview: 'Aa' },
  { id: 'italic', label: 'It√°lico', preview: 'Aa' },
  { id: 'serif', label: 'Serif', preview: 'Aa' },
  { id: 'script', label: 'Script', preview: 'Aa' },
  { id: 'modern', label: 'Moderna', preview: 'Aa' },
];

const COLORS = [
  '#ffffff', '#000000', '#ff0000', '#ff6b00', '#ffdd00',
  '#00ff00', '#00ffff', '#0066ff', '#9900ff', '#ff00ff',
  '#ff1744', '#00e676', '#2979ff', '#d500f9', '#ff9100',
];

const ALIGNMENTS: Array<{ id: TextAlign; icon: string }> = [
  { id: 'left', icon: 'format-align-left' },
  { id: 'center', icon: 'format-align-center' },
  { id: 'right', icon: 'format-align-right' },
];

const BACKGROUND_STYLES = [
  { id: 'none', label: 'Sem fundo', color: 'transparent' },
  { id: 'solid', label: 'S√≥lido', color: '#000000' },
  { id: 'semi', label: 'Semi', color: 'rgba(0,0,0,0.5)' },
];

export default function TextTool({
  visible,
  onConfirm,
  onCancel,
  initialText,
}: TextToolProps) {
  const [text, setText] = useState(initialText?.text || '');
  const [fontSize, setFontSize] = useState(initialText?.fontSize || 32);
  const [fontFamily, setFontFamily] = useState<FontFamily>(
    initialText?.fontFamily || 'default'
  );
  const [color, setColor] = useState(initialText?.color || '#ffffff');
  const [backgroundColor, setBackgroundColor] = useState(
    initialText?.backgroundColor || 'transparent'
  );
  const [align, setAlign] = useState<TextAlign>(initialText?.align || 'center');
  const [hasOutline, setHasOutline] = useState(initialText?.hasOutline || false);
  const [rotation, setRotation] = useState(initialText?.rotation || 0);

  const handleConfirm = () => {
    if (!text.trim()) return;

    const element: TextElement = {
      id: initialText?.id || `text-${Date.now()}`,
      type: 'text',
      text: text.trim(),
      fontSize,
      fontFamily,
      color,
      backgroundColor: backgroundColor === 'transparent' ? undefined : backgroundColor,
      hasOutline,
      outlineColor: hasOutline ? '#000000' : undefined,
      align,
      x: initialText?.x || 50,
      y: initialText?.y || 200,
      rotation,
      scale: initialText?.scale || 1,
    };

    onConfirm(element);
  };

  const getFontStyle = (family: FontFamily) => {
    switch (family) {
      case 'bold':
        return { fontWeight: '700' as const };
      case 'italic':
        return { fontStyle: 'italic' as const };
      case 'serif':
        return { fontFamily: 'serif' };
      case 'script':
        return { fontFamily: 'cursive' };
      default:
        return {};
    }
  };

  return (
    <Modal
      visible={visible}
      animationType="slide"
      transparent
      onRequestClose={onCancel}
    >
      <View style={styles.container}>
        <BlurView intensity={40} style={StyleSheet.absoluteFillObject} />

        <View style={styles.content}>
          {/* Header */}
          <View style={styles.header}>
            <TouchableOpacity onPress={onCancel} style={styles.headerButton}>
              <MaterialCommunityIcons name="close" size={24} color="#fff" />
            </TouchableOpacity>
            <Text style={styles.headerTitle}>Adicionar Texto</Text>
            <TouchableOpacity onPress={handleConfirm} style={styles.headerButton}>
              <MaterialCommunityIcons name="check" size={24} color={theme.colors.primary} />
            </TouchableOpacity>
          </View>

          {/* Text Input */}
          <View style={styles.inputContainer}>
            <TextInput
              style={[
                styles.textInput,
                {
                  fontSize,
                  color,
                  backgroundColor,
                  textAlign: align,
                  ...getFontStyle(fontFamily),
                },
              ]}
              value={text}
              onChangeText={setText}
              placeholder="Digite seu texto..."
              placeholderTextColor="rgba(255,255,255,0.5)"
              multiline
              maxLength={150}
              autoFocus
            />
            <Text style={styles.charCount}>{text.length}/150</Text>
          </View>

          <ScrollView 
            style={styles.optionsScroll}
            showsVerticalScrollIndicator={false}
          >
            {/* Font Size */}
            <View style={styles.section}>
              <View style={styles.sectionHeader}>
                <MaterialCommunityIcons name="format-size" size={20} color="#fff" />
                <Text style={styles.sectionTitle}>Tamanho</Text>
                <Text style={styles.sectionValue}>{Math.round(fontSize)}px</Text>
              </View>
              <Slider
                style={styles.slider}
                minimumValue={16}
                maximumValue={72}
                value={fontSize}
                onValueChange={setFontSize}
                step={1}
                minimumTrackTintColor={theme.colors.primary}
                maximumTrackTintColor="rgba(255,255,255,0.2)"
                thumbTintColor={theme.colors.primary}
              />
            </View>

            {/* Font Family */}
            <View style={styles.section}>
              <View style={styles.sectionHeader}>
                <MaterialCommunityIcons name="format-font" size={20} color="#fff" />
                <Text style={styles.sectionTitle}>Fonte</Text>
              </View>
              <ScrollView 
                horizontal 
                showsHorizontalScrollIndicator={false}
                contentContainerStyle={styles.fontsContainer}
              >
                {FONTS.map((font) => (
                  <TouchableOpacity
                    key={font.id}
                    style={[
                      styles.fontButton,
                      fontFamily === font.id && styles.fontButtonActive,
                    ]}
                    onPress={() => setFontFamily(font.id)}
                  >
                    <Text
                      style={[
                        styles.fontPreview,
                        getFontStyle(font.id),
                        fontFamily === font.id && styles.fontPreviewActive,
                      ]}
                    >
                      {font.preview}
                    </Text>
                    <Text style={styles.fontLabel}>{font.label}</Text>
                  </TouchableOpacity>
                ))}
              </ScrollView>
            </View>

            {/* Text Color */}
            <View style={styles.section}>
              <View style={styles.sectionHeader}>
                <MaterialCommunityIcons name="palette" size={20} color="#fff" />
                <Text style={styles.sectionTitle}>Cor do Texto</Text>
              </View>
              <View style={styles.colorsGrid}>
                {COLORS.map((c) => (
                  <TouchableOpacity
                    key={c}
                    style={[
                      styles.colorButton,
                      { backgroundColor: c },
                      color === c && styles.colorButtonActive,
                    ]}
                    onPress={() => setColor(c)}
                  >
                    {color === c && (
                      <MaterialCommunityIcons name="check" size={16} color="#fff" />
                    )}
                  </TouchableOpacity>
                ))}
              </View>
            </View>

            {/* Background */}
            <View style={styles.section}>
              <View style={styles.sectionHeader}>
                <MaterialCommunityIcons name="format-color-fill" size={20} color="#fff" />
                <Text style={styles.sectionTitle}>Fundo do Texto</Text>
              </View>
              <View style={styles.backgroundOptions}>
                {BACKGROUND_STYLES.map((bg) => (
                  <TouchableOpacity
                    key={bg.id}
                    style={[
                      styles.backgroundButton,
                      backgroundColor === bg.color && styles.backgroundButtonActive,
                    ]}
                    onPress={() => setBackgroundColor(bg.color)}
                  >
                    <View style={[styles.backgroundPreview, { backgroundColor: bg.color }]}>
                      {bg.id === 'none' && <Text style={styles.backgroundNone}>A</Text>}
                    </View>
                    <Text style={styles.backgroundLabel}>{bg.label}</Text>
                  </TouchableOpacity>
                ))}
              </View>
            </View>

            {/* Alignment */}
            <View style={styles.section}>
              <View style={styles.sectionHeader}>
                <MaterialCommunityIcons name="format-align-center" size={20} color="#fff" />
                <Text style={styles.sectionTitle}>Alinhamento</Text>
              </View>
              <View style={styles.alignmentButtons}>
                {ALIGNMENTS.map((a) => (
                  <TouchableOpacity
                    key={a.id}
                    style={[
                      styles.alignButton,
                      align === a.id && styles.alignButtonActive,
                    ]}
                    onPress={() => setAlign(a.id)}
                  >
                    <MaterialCommunityIcons
                      name={a.icon as any}
                      size={24}
                      color={align === a.id ? theme.colors.primary : '#fff'}
                    />
                  </TouchableOpacity>
                ))}
              </View>
            </View>

            {/* Outline Toggle */}
            <View style={styles.section}>
              <TouchableOpacity
                style={styles.toggleOption}
                onPress={() => setHasOutline(!hasOutline)}
              >
                <View style={styles.toggleLeft}>
                  <MaterialCommunityIcons name="border-outside" size={20} color="#fff" />
                  <Text style={styles.toggleLabel}>Contorno</Text>
                </View>
                <View
                  style={[
                    styles.toggle,
                    hasOutline && styles.toggleActive,
                  ]}
                >
                  <View style={styles.toggleThumb} />
                </View>
              </TouchableOpacity>
            </View>

            {/* Rotation */}
            <View style={styles.section}>
              <View style={styles.sectionHeader}>
                <MaterialCommunityIcons name="rotate-3d-variant" size={20} color="#fff" />
                <Text style={styles.sectionTitle}>Rota√ß√£o</Text>
                <Text style={styles.sectionValue}>{Math.round(rotation)}¬∞</Text>
              </View>
              <Slider
                style={styles.slider}
                minimumValue={0}
                maximumValue={360}
                value={rotation}
                onValueChange={setRotation}
                step={5}
                minimumTrackTintColor={theme.colors.primary}
                maximumTrackTintColor="rgba(255,255,255,0.2)"
                thumbTintColor={theme.colors.primary}
              />
            </View>
          </ScrollView>

          {/* Confirm Button */}
          <TouchableOpacity
            style={styles.confirmButton}
            onPress={handleConfirm}
            activeOpacity={0.9}
          >
            <LinearGradient
              colors={theme.colors.gradientPrimary}
              style={styles.confirmGradient}
              start={{ x: 0, y: 0 }}
              end={{ x: 1, y: 0 }}
            >
              <Text style={styles.confirmText}>Adicionar Texto</Text>
            </LinearGradient>
          </TouchableOpacity>
        </View>
      </View>
    </Modal>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'flex-end',
  },
  content: {
    backgroundColor: theme.colors.bgSecondary,
    borderTopLeftRadius: theme.borderRadius.xxl,
    borderTopRightRadius: theme.borderRadius.xxl,
    paddingTop: theme.spacing.md,
    maxHeight: '90%',
  },
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    paddingHorizontal: theme.spacing.lg,
    paddingBottom: theme.spacing.lg,
    borderBottomWidth: 1,
    borderBottomColor: 'rgba(255,255,255,0.1)',
  },
  headerButton: {
    width: 40,
    height: 40,
    alignItems: 'center',
    justifyContent: 'center',
  },
  headerTitle: {
    ...theme.typography.h4,
    color: theme.colors.textPrimary,
  },
  inputContainer: {
    paddingHorizontal: theme.spacing.lg,
    paddingVertical: theme.spacing.xl,
  },
  textInput: {
    minHeight: 100,
    paddingHorizontal: theme.spacing.lg,
    paddingVertical: theme.spacing.md,
    borderRadius: theme.borderRadius.lg,
    borderWidth: 2,
    borderColor: 'rgba(255,255,255,0.2)',
  },
  charCount: {
    ...theme.typography.caption,
    color: theme.colors.textTertiary,
    textAlign: 'right',
    marginTop: theme.spacing.sm,
  },
  optionsScroll: {
    flex: 1,
    paddingHorizontal: theme.spacing.lg,
  },
  section: {
    marginBottom: theme.spacing.xl,
  },
  sectionHeader: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: theme.spacing.sm,
    marginBottom: theme.spacing.md,
  },
  sectionTitle: {
    ...theme.typography.bodySmall,
    color: theme.colors.textPrimary,
    fontWeight: '600',
    flex: 1,
  },
  sectionValue: {
    ...theme.typography.bodySmall,
    color: theme.colors.primary,
    fontWeight: '700',
  },
  slider: {
    width: '100%',
    height: 40,
  },
  fontsContainer: {
    gap: theme.spacing.sm,
    paddingVertical: theme.spacing.sm,
  },
  fontButton: {
    alignItems: 'center',
    padding: theme.spacing.md,
    borderRadius: theme.borderRadius.md,
    backgroundColor: 'rgba(255,255,255,0.1)',
    minWidth: 70,
  },
  fontButtonActive: {
    backgroundColor: theme.colors.primary + '30',
    borderWidth: 2,
    borderColor: theme.colors.primary,
  },
  fontPreview: {
    fontSize: 28,
    color: theme.colors.textSecondary,
    marginBottom: 4,
  },
  fontPreviewActive: {
    color: theme.colors.primary,
  },
  fontLabel: {
    ...theme.typography.caption,
    color: theme.colors.textSecondary,
  },
  colorsGrid: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    gap: theme.spacing.sm,
  },
  colorButton: {
    width: 44,
    height: 44,
    borderRadius: theme.borderRadius.md,
    alignItems: 'center',
    justifyContent: 'center',
    borderWidth: 2,
    borderColor: 'transparent',
  },
  colorButtonActive: {
    borderColor: '#fff',
    ...theme.shadows.md,
  },
  backgroundOptions: {
    flexDirection: 'row',
    gap: theme.spacing.md,
  },
  backgroundButton: {
    flex: 1,
    alignItems: 'center',
    padding: theme.spacing.md,
    borderRadius: theme.borderRadius.md,
    backgroundColor: 'rgba(255,255,255,0.1)',
  },
  backgroundButtonActive: {
    backgroundColor: theme.colors.primary + '30',
    borderWidth: 2,
    borderColor: theme.colors.primary,
  },
  backgroundPreview: {
    width: 48,
    height: 48,
    borderRadius: theme.borderRadius.sm,
    alignItems: 'center',
    justifyContent: 'center',
    marginBottom: 6,
    borderWidth: 1,
    borderColor: 'rgba(255,255,255,0.2)',
  },
  backgroundNone: {
    fontSize: 24,
    color: '#fff',
    fontWeight: '700',
  },
  backgroundLabel: {
    ...theme.typography.caption,
    color: theme.colors.textSecondary,
  },
  alignmentButtons: {
    flexDirection: 'row',
    gap: theme.spacing.sm,
  },
  alignButton: {
    flex: 1,
    height: 48,
    borderRadius: theme.borderRadius.md,
    backgroundColor: 'rgba(255,255,255,0.1)',
    alignItems: 'center',
    justifyContent: 'center',
  },
  alignButtonActive: {
    backgroundColor: theme.colors.primary + '30',
    borderWidth: 2,
    borderColor: theme.colors.primary,
  },
  toggleOption: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    padding: theme.spacing.md,
    borderRadius: theme.borderRadius.md,
    backgroundColor: 'rgba(255,255,255,0.1)',
  },
  toggleLeft: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: theme.spacing.md,
  },
  toggleLabel: {
    ...theme.typography.bodySmall,
    color: theme.colors.textPrimary,
    fontWeight: '600',
  },
  toggle: {
    width: 50,
    height: 28,
    borderRadius: 14,
    backgroundColor: 'rgba(255,255,255,0.2)',
    padding: 2,
    justifyContent: 'center',
  },
  toggleActive: {
    backgroundColor: theme.colors.primary,
  },
  toggleThumb: {
    width: 24,
    height: 24,
    borderRadius: 12,
    backgroundColor: '#fff',
  },
  confirmButton: {
    margin: theme.spacing.lg,
    borderRadius: theme.borderRadius.lg,
    overflow: 'hidden',
    ...theme.shadows.lg,
  },
  confirmGradient: {
    paddingVertical: theme.spacing.lg,
    alignItems: 'center',
  },
  confirmText: {
    ...theme.typography.button,
    color: '#fff',
  },
});
üé® 5. DRAWINGTOOL.TSX (Ferramenta de Desenho)
TypeScript

// src/story/components/tools/DrawingTool.tsx

import React, { useState, useRef } from 'react';
import {
  View,
  StyleSheet,
  TouchableOpacity,
  Text,
  Modal,
  ScrollView,
  Dimensions,
  PanResponder,
} from 'react-native';
import { LinearGradient } from 'expo-linear-gradient';
import { BlurView } from 'expo-blur';
import { MaterialCommunityIcons } from '@expo/vector-icons';
import Svg, { Path, G } from 'react-native-svg';
import Slider from '@react-native-community/slider';
import { DrawElement, BrushType } from '../../types';
import theme from '../../styles/theme';

const { width: SCREEN_WIDTH, height: SCREEN_HEIGHT } = Dimensions.get('window');
const CANVAS_HEIGHT = SCREEN_HEIGHT * 0.65;

interface DrawingToolProps {
  visible: boolean;
  onConfirm: (elements: DrawElement[]) => void;
  onCancel: () => void;
}

interface Brush {
  id: BrushType;
  label: string;
  icon: string;
  color: string;
}

const BRUSHES: Brush[] = [
  { id: 'normal', label: 'Normal', icon: 'pencil', color: '#3b82f6' },
  { id: 'marcador', label: 'Marcador', icon: 'marker', color: '#ec4899' },
  { id: 'neon', label: 'Neon', icon: 'lightbulb-on', color: '#8b5cf6' },
  { id: 'caneta', label: 'Caneta', icon: 'pen', color: '#10b981' },
];

const COLORS = [
  '#ffffff', '#000000', '#ff0000', '#ff6b00', '#ffdd00',
  '#00ff00', '#00ffff', '#0066ff', '#9900ff', '#ff00ff',
];

export default function DrawingTool({
  visible,
  onConfirm,
  onCancel,
}: DrawingToolProps) {
  const [brushType, setBrushType] = useState<BrushType>('normal');
  const [brushColor, setBrushColor] = useState('#ffffff');
  const [brushWidth, setBrushWidth] = useState(3);
  const [opacity, setOpacity] = useState(1);
  const [elements, setElements] = useState<DrawElement[]>([]);
  const [currentPath, setCurrentPath] = useState('');
  const [history, setHistory] = useState<DrawElement[][]>([[]]);
  const [historyIndex, setHistoryIndex] = useState(0);

  const panResponder = useRef(
    PanResponder.create({
      onStartShouldSetPanResponder: () => true,
      onMoveShouldSetPanResponder: () => true,

      onPanResponderGrant: (evt) => {
        const { locationX, locationY } = evt.nativeEvent;
        setCurrentPath(`M ${locationX} ${locationY}`);
      },

      onPanResponderMove: (evt) => {
        const { locationX, locationY } = evt.nativeEvent;
        setCurrentPath((prev) => `${prev} L ${locationX} ${locationY}`);
      },

      onPanResponderRelease: () => {
        if (currentPath) {
          const newElement: DrawElement = {
            id: `draw-${Date.now()}`,
            type: 'draw',
            x: 0,
            y: 0,
            data: {
              path: currentPath,
              color: brushColor,
              width: getBrushWidth(),
              opacity,
              brushType,
            },
          };

          const newElements = [...elements, newElement];
          setElements(newElements);

          const newHistory = history.slice(0, historyIndex + 1);
          newHistory.push(newElements);
          setHistory(newHistory);
          setHistoryIndex(newHistory.length - 1);

          setCurrentPath('');
        }
      },
    })
  ).current;

  const getBrushWidth = () => {
    switch (brushType) {
      case 'marcador':
        return brushWidth * 2.5;
      case 'neon':
        return brushWidth * 1.8;
      case 'caneta':
        return brushWidth * 0.8;
      default:
        return brushWidth;
    }
  };

  const getBrushStyle = (type: BrushType) => {
    switch (type) {
      case 'marcador':
        return { strokeLinecap: 'square' as const, strokeLinejoin: 'miter' as const };
      case 'neon':
        return { strokeLinecap: 'round' as const, strokeLinejoin: 'round' as const };
      case 'caneta':
        return { strokeLinecap: 'round' as const, strokeLinejoin: 'round' as const };
      default:
        return { strokeLinecap: 'round' as const, strokeLinejoin: 'round' as const };
    }
  };

  const handleUndo = () => {
    if (historyIndex > 0) {
      setHistoryIndex(historyIndex - 1);
      setElements(history[historyIndex - 1]);
    }
  };

  const handleRedo = () => {
    if (historyIndex < history.length - 1) {
      setHistoryIndex(historyIndex + 1);
      setElements(history[historyIndex + 1]);
    }
  };

  const handleClear = () => {
    const newHistory = history.slice(0, historyIndex + 1);
    newHistory.push([]);
    setHistory(newHistory);
    setHistoryIndex(newHistory.length - 1);
    setElements([]);
  };

  const handleConfirm = () => {
    onConfirm(elements);
  };

  return (
    <Modal
      visible={visible}
      animationType="slide"
      presentationStyle="fullScreen"
      onRequestClose={onCancel}
    >
      <View style={styles.container}>
        <LinearGradient
          colors={theme.colors.gradientDark}
          style={StyleSheet.absoluteFillObject}
        />

        {/* Header */}
        <View style={styles.header}>
          <TouchableOpacity onPress={onCancel} style={styles.headerButton}>
            <MaterialCommunityIcons name="close" size={24} color="#fff" />
          </TouchableOpacity>
          <Text style={styles.headerTitle}>Desenhar</Text>
          <TouchableOpacity onPress={handleConfirm} style={styles.headerButton}>
            <MaterialCommunityIcons name="check" size={24} color={theme.colors.primary} />
          </TouchableOpacity>
        </View>

        {/* Canvas */}
        <View style={styles.canvasContainer}>
          <View style={styles.canvas} {...panResponder.panHandlers}>
            <Svg height={CANVAS_HEIGHT} width={SCREEN_WIDTH}>
              <G>
                {elements.map((element) => {
                  const brushStyle = getBrushStyle(element.data.brushType);
                  return (
                    <Path
                      key={element.id}
                      d={element.data.path}
                      stroke={element.data.color}
                      strokeWidth={element.data.width}
                      strokeOpacity={element.data.opacity}
                      fill="none"
                      strokeLinecap={brushStyle.strokeLinecap}
                      strokeLinejoin={brushStyle.strokeLinejoin}
                    />
                  );
                })}

                {currentPath && (
                  <Path
                    d={currentPath}
                    stroke={brushColor}
                    strokeWidth={getBrushWidth()}
                    strokeOpacity={opacity}
                    fill="none"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  />
                )}
              </G>
            </Svg>
          </View>
        </View>

        {/* Tools Panel */}
        <View style={styles.toolsPanel}>
          <BlurView intensity={30} style={styles.toolsBlur}>
            <ScrollView
              horizontal
              showsHorizontalScrollIndicator={false}
              contentContainerStyle={styles.toolsContent}
            >
              {/* Brush Types */}
              <View style={styles.toolSection}>
                <Text style={styles.toolSectionLabel}>Pincel</Text>
                <View style={styles.brushButtons}>
                  {BRUSHES.map((brush) => (
                    <TouchableOpacity
                      key={brush.id}
                      style={[
                        styles.brushButton,
                        brushType === brush.id && {
                          backgroundColor: brush.color + '30',
                          borderColor: brush.color,
                        },
                      ]}
                      onPress={() => setBrushType(brush.id)}
                    >
                      <MaterialCommunityIcons
                        name={brush.icon as any}
                        size={24}
                        color={brushType === brush.id ? brush.color : '#fff'}
                      />
                    </TouchableOpacity>
                  ))}
                </View>
              </View>

              {/* Colors */}
              <View style={styles.toolSection}>
                <Text style={styles.toolSectionLabel}>Cor</Text>
                <View style={styles.colorButtons}>
                  {COLORS.map((c) => (
                    <TouchableOpacity
                      key={c}
                      style={[
                        styles.colorButton,
                        { backgroundColor: c },
                        brushColor === c && styles.colorButtonActive,
                      ]}
                      onPress={() => setBrushColor(c)}
                    />
                  ))}
                </View>
              </View>

              {/* Brush Width */}
              <View style={styles.toolSection}>
                <Text style={styles.toolSectionLabel}>
                  Tamanho: {Math.round(brushWidth)}px
                </Text>
                <Slider
                  style={styles.slider}
                  minimumValue={1}
                  maximumValue={20}
                  value={brushWidth}
                  onValueChange={setBrushWidth}
                  step={1}
                  minimumTrackTintColor={theme.colors.primary}
                  maximumTrackTintColor="rgba(255,255,255,0.2)"
                  thumbTintColor={theme.colors.primary}
                />
              </View>

              {/* Opacity */}
              <View style={styles.toolSection}>
                <Text style={styles.toolSectionLabel}>
                  Opacidade: {Math.round(opacity * 100)}%
                </Text>
                <Slider
                  style={styles.slider}
                  minimumValue={0.1}
                  maximumValue={1}
                  value={opacity}
                  onValueChange={setOpacity}
                  step={0.1}
                  minimumTrackTintColor={theme.colors.primary}
                  maximumTrackTintColor="rgba(255,255,255,0.2)"
                  thumbTintColor={theme.colors.primary}
                />
              </View>

              {/* Actions */}
              <View style={styles.toolSection}>
                <Text style={styles.toolSectionLabel}>A√ß√µes</Text>
                <View style={styles.actionButtons}>
                  <TouchableOpacity
                    style={[
                      styles.actionButton,
                      historyIndex === 0 && styles.actionButtonDisabled,
                    ]}
                    onPress={handleUndo}
                    disabled={historyIndex === 0}
                  >
                    <MaterialCommunityIcons
                      name="undo"
                      size={24}
                      color={historyIndex === 0 ? '#666' : '#fff'}
                    />
                  </TouchableOpacity>
                  <TouchableOpacity
                    style={[
                      styles.actionButton,
                      historyIndex === history.length - 1 && styles.actionButtonDisabled,
                    ]}
                    onPress={handleRedo}
                    disabled={historyIndex === history.length - 1}
                  >
                    <MaterialCommunityIcons
                      name="redo"
                      size={24}
                      color={historyIndex === history.length - 1 ? '#666' : '#fff'}
                    />
                  </TouchableOpacity>
                  <TouchableOpacity style={styles.actionButton} onPress={handleClear}>
                    <MaterialCommunityIcons name="delete" size={24} color="#ef4444" />
                  </TouchableOpacity>
                </View>
              </View>
            </ScrollView>
          </BlurView>
        </View>
      </View>
    </Modal>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    paddingHorizontal: theme.spacing.lg,
    paddingTop: 60,
    paddingBottom: theme.spacing.lg,
  },
  headerButton: {
    width: 40,
    height: 40,
    alignItems: 'center',
    justifyContent: 'center',
  },
  headerTitle: {
    ...theme.typography.h4,
    color: theme.colors.textPrimary,
  },
  canvasContainer: {
    flex: 1,
    marginHorizontal: theme.spacing.lg,
    marginBottom: theme.spacing.lg,
    borderRadius: theme.borderRadius.xl,
    overflow: 'hidden',
    backgroundColor: 'rgba(255,255,255,0.05)',
  },
  canvas: {
    flex: 1,
  },
  toolsPanel: {
    height: 180,
    borderTopLeftRadius: theme.borderRadius.xxl,
    borderTopRightRadius: theme.borderRadius.xxl,
    overflow: 'hidden',
  },
  toolsBlur: {
    flex: 1,
  },
  toolsContent: {
    paddingHorizontal: theme.spacing.lg,
    paddingVertical: theme.spacing.lg,
    gap: theme.spacing.xl,
  },
  toolSection: {
    minWidth: 150,
  },
  toolSectionLabel: {
    ...theme.typography.caption,
    color: theme.colors.textSecondary,
    marginBottom: theme.spacing.sm,
    fontWeight: '600',
  },
  brushButtons: {
    flexDirection: 'row',
    gap: theme.spacing.sm,
  },
  brushButton: {
    width: 52,
    height: 52,
    borderRadius: theme.borderRadius.md,
    backgroundColor: 'rgba(255,255,255,0.1)',
    alignItems: 'center',
    justifyContent: 'center',
    borderWidth: 2,
    borderColor: 'transparent',
  },
  colorButtons: {
    flexDirection: 'row',
    gap: theme.spacing.sm,
    flexWrap: 'wrap',
  },
  colorButton: {
    width: 40,
    height: 40,
    borderRadius: theme.borderRadius.sm,
    borderWidth: 2,
    borderColor: 'transparent',
  },
  colorButtonActive: {
    borderColor: '#fff',
    ...theme.shadows.md,
  },
  slider: {
    width: 150,
    height: 40,
  },
  actionButtons: {
    flexDirection: 'row',
    gap: theme.spacing.sm,
  },
  actionButton: {
    width: 52,
    height: 52,
    borderRadius: theme.borderRadius.md,
    backgroundColor: 'rgba(255,255,255,0.1)',
    alignItems: 'center',
    justifyContent: 'center',
  },
  actionButtonDisabled: {
    opacity: 0.3,
  },
});




FILTERSTOOL.TSX
TypeScript

// src/story/components/tools/FiltersTool.tsx

import React, { useState } from 'react';
import {
  View,
  StyleSheet,
  TouchableOpacity,
  Text,
  Modal,
  ScrollView,
  Image,
  Dimensions,
} from 'react-native';
import { LinearGradient } from 'expo-linear-gradient';
import { BlurView } from 'expo-blur';
import { MaterialCommunityIcons } from '@expo/vector-icons';
import { FilterType } from '../../types';
import theme from '../../styles/theme';

const { width: SCREEN_WIDTH } = Dimensions.get('window');

interface FiltersToolProps {
  visible: boolean;
  imageUri: string;
  currentFilter: FilterType;
  onConfirm: (filter: FilterType) => void;
  onCancel: () => void;
}

interface Filter {
  id: FilterType;
  label: string;
  icon: string;
  gradient: string[];
}

const FILTERS: Filter[] = [
  {
    id: 'original',
    label: 'Original',
    icon: 'image',
    gradient: ['#ffffff', '#f3f4f6'],
  },
  {
    id: 'vintage',
    label: 'Vintage',
    icon: 'image-filter-vintage',
    gradient: ['#d4a574', '#8b6f47'],
  },
  {
    id: 'pb',
    label: 'P&B',
    icon: 'image-filter-black-white',
    gradient: ['#ffffff', '#000000'],
  },
  {
    id: 'sepia',
    label: 'S√©pia',
    icon: 'film',
    gradient: ['#f4e8d8', '#9b7653'],
  },
  {
    id: 'vibrante',
    label: 'Vibrante',
    icon: 'brightness-7',
    gradient: ['#ff6b6b', '#4ecdc4'],
  },
  {
    id: 'frio',
    label: 'Frio',
    icon: 'snowflake',
    gradient: ['#a8e6cf', '#3eadcf'],
  },
  {
    id: 'quente',
    label: 'Quente',
    icon: 'fire',
    gradient: ['#ff9a56', '#ff6b6b'],
  },
  {
    id: 'desbotado',
    label: 'Desbotado',
    icon: 'contrast-box',
    gradient: ['#e8e8e8', '#b8b8b8'],
  },
  {
    id: 'dramatico',
    label: 'Dram√°tico',
    icon: 'theater',
    gradient: ['#2c3e50', '#000000'],
  },
  {
    id: 'retro',
    label: 'Retr√¥',
    icon: 'television-classic',
    gradient: ['#f39c12', '#e74c3c'],
  },
];

export default function FiltersTool({
  visible,
  imageUri,
  currentFilter,
  onConfirm,
  onCancel,
}: FiltersToolProps) {
  const [selectedFilter, setSelectedFilter] = useState<FilterType>(currentFilter);

  const handleConfirm = () => {
    onConfirm(selectedFilter);
  };

  return (
    <Modal
      visible={visible}
      animationType="slide"
      transparent
      onRequestClose={onCancel}
    >
      <View style={styles.container}>
        <BlurView intensity={40} style={StyleSheet.absoluteFillObject} />

        <View style={styles.content}>
          {/* Header */}
          <View style={styles.header}>
            <TouchableOpacity onPress={onCancel} style={styles.headerButton}>
              <MaterialCommunityIcons name="close" size={24} color="#fff" />
            </TouchableOpacity>
            <Text style={styles.headerTitle}>Filtros</Text>
            <TouchableOpacity onPress={handleConfirm} style={styles.headerButton}>
              <MaterialCommunityIcons
                name="check"
                size={24}
                color={theme.colors.primary}
              />
            </TouchableOpacity>
          </View>

          {/* Preview */}
          <View style={styles.previewContainer}>
            <Image source={{ uri: imageUri }} style={styles.previewImage} />
            <LinearGradient
              colors={['transparent', 'rgba(0,0,0,0.4)']}
              style={styles.previewGradient}
            />
            <View style={styles.previewLabel}>
              <BlurView intensity={20} style={styles.previewLabelBlur}>
                <Text style={styles.previewLabelText}>
                  {FILTERS.find((f) => f.id === selectedFilter)?.label}
                </Text>
              </BlurView>
            </View>
          </View>

          {/* Filters Grid */}
          <ScrollView
            horizontal
            showsHorizontalScrollIndicator={false}
            contentContainerStyle={styles.filtersContainer}
          >
            {FILTERS.map((filter) => (
              <TouchableOpacity
                key={filter.id}
                style={[
                  styles.filterCard,
                  selectedFilter === filter.id && styles.filterCardActive,
                ]}
                onPress={() => setSelectedFilter(filter.id)}
                activeOpacity={0.8}
              >
                <View style={styles.filterPreview}>
                  <Image
                    source={{ uri: imageUri }}
                    style={styles.filterThumbnail}
                  />
                  <LinearGradient
                    colors={filter.gradient}
                    style={styles.filterOverlay}
                    start={{ x: 0, y: 0 }}
                    end={{ x: 1, y: 1 }}
                  />
                </View>
                <View style={styles.filterInfo}>
                  <MaterialCommunityIcons
                    name={filter.icon as any}
                    size={18}
                    color={
                      selectedFilter === filter.id
                        ? theme.colors.primary
                        : theme.colors.textSecondary
                    }
                  />
                  <Text
                    style={[
                      styles.filterLabel,
                      selectedFilter === filter.id && styles.filterLabelActive,
                    ]}
                  >
                    {filter.label}
                  </Text>
                </View>
                {selectedFilter === filter.id && (
                  <View style={styles.filterCheckmark}>
                    <MaterialCommunityIcons
                      name="check-circle"
                      size={24}
                      color={theme.colors.primary}
                    />
                  </View>
                )}
              </TouchableOpacity>
            ))}
          </ScrollView>

          {/* Confirm Button */}
          <TouchableOpacity
            style={styles.confirmButton}
            onPress={handleConfirm}
            activeOpacity={0.9}
          >
            <LinearGradient
              colors={theme.colors.gradientPrimary}
              style={styles.confirmGradient}
              start={{ x: 0, y: 0 }}
              end={{ x: 1, y: 0 }}
            >
              <Text style={styles.confirmText}>Aplicar Filtro</Text>
            </LinearGradient>
          </TouchableOpacity>
        </View>
      </View>
    </Modal>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'flex-end',
  },
  content: {
    backgroundColor: theme.colors.bgSecondary,
    borderTopLeftRadius: theme.borderRadius.xxl,
    borderTopRightRadius: theme.borderRadius.xxl,
    paddingTop: theme.spacing.md,
    maxHeight: '90%',
  },
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    paddingHorizontal: theme.spacing.lg,
    paddingBottom: theme.spacing.lg,
  },
  headerButton: {
    width: 40,
    height: 40,
    alignItems: 'center',
    justifyContent: 'center',
  },
  headerTitle: {
    ...theme.typography.h4,
    color: theme.colors.textPrimary,
  },
  previewContainer: {
    width: SCREEN_WIDTH - 32,
    height: 280,
    marginHorizontal: theme.spacing.lg,
    marginBottom: theme.spacing.xl,
    borderRadius: theme.borderRadius.xl,
    overflow: 'hidden',
    position: 'relative',
  },
  previewImage: {
    width: '100%',
    height: '100%',
    resizeMode: 'cover',
  },
  previewGradient: {
    ...StyleSheet.absoluteFillObject,
  },
  previewLabel: {
    position: 'absolute',
    bottom: theme.spacing.lg,
    left: theme.spacing.lg,
    borderRadius: theme.borderRadius.md,
    overflow: 'hidden',
  },
  previewLabelBlur: {
    paddingHorizontal: theme.spacing.md,
    paddingVertical: theme.spacing.sm,
  },
  previewLabelText: {
    ...theme.typography.bodySmall,
    color: theme.colors.textPrimary,
    fontWeight: '600',
  },
  filtersContainer: {
    paddingHorizontal: theme.spacing.lg,
    paddingBottom: theme.spacing.lg,
    gap: theme.spacing.md,
  },
  filterCard: {
    width: 100,
    borderRadius: theme.borderRadius.lg,
    backgroundColor: 'rgba(255,255,255,0.05)',
    overflow: 'hidden',
    borderWidth: 2,
    borderColor: 'transparent',
  },
  filterCardActive: {
    borderColor: theme.colors.primary,
    ...theme.shadows.lg,
  },
  filterPreview: {
    width: '100%',
    height: 100,
    position: 'relative',
  },
  filterThumbnail: {
    width: '100%',
    height: '100%',
    resizeMode: 'cover',
  },
  filterOverlay: {
    ...StyleSheet.absoluteFillObject,
    opacity: 0.4,
  },
  filterInfo: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 6,
    padding: theme.spacing.sm,
  },
  filterLabel: {
    ...theme.typography.caption,
    color: theme.colors.textSecondary,
    fontWeight: '600',
  },
  filterLabelActive: {
    color: theme.colors.primary,
  },
  filterCheckmark: {
    position: 'absolute',
    top: 8,
    right: 8,
  },
  confirmButton: {
    margin: theme.spacing.lg,
    borderRadius: theme.borderRadius.lg,
    overflow: 'hidden',
    ...theme.shadows.lg,
  },
  confirmGradient: {
    paddingVertical: theme.spacing.lg,
    alignItems: 'center',
  },
  confirmText: {
    ...theme.typography.button,
    color: '#fff',
  },
});
üòÄ 7. STICKERSTOOL.TSX
TypeScript

// src/story/components/tools/StickersTool.tsx

import React, { useState } from 'react';
import {
  View,
  StyleSheet,
  TouchableOpacity,
  Text,
  Modal,
  ScrollView,
  TextInput,
  FlatList,
  Image,
} from 'react-native';
import { LinearGradient } from 'expo-linear-gradient';
import { BlurView } from 'expo-blur';
import { MaterialCommunityIcons } from '@expo/vector-icons';
import { StickerElement } from '../../types';
import theme from '../../styles/theme';

interface StickersToolProps {
  visible: boolean;
  onSelect: (sticker: StickerElement) => void;
  onCancel: () => void;
}

type StickerTab = 'emojis' | 'gifs' | 'stickers';

interface Sticker {
  id: string;
  url: string;
  label: string;
  category: string;
}

const EMOJI_STICKERS: Sticker[] = [
  {
    id: 'smile',
    url: 'https://cdn.jsdelivr.net/npm/emoji-datasource-apple@14.0.0/img/apple/64/1f60a.png',
    label: 'Sorriso',
    category: 'emoji',
  },
  {
    id: 'laugh',
    url: 'https://cdn.jsdelivr.net/npm/emoji-datasource-apple@14.0.0/img/apple/64/1f923.png',
    label: 'Riso',
    category: 'emoji',
  },
  {
    id: 'heart',
    url: 'https://cdn.jsdelivr.net/npm/emoji-datasource-apple@14.0.0/img/apple/64/2764-fe0f.png',
    label: 'Cora√ß√£o',
    category: 'emoji',
  },
  {
    id: 'fire',
    url: 'https://cdn.jsdelivr.net/npm/emoji-datasource-apple@14.0.0/img/apple/64/1f525.png',
    label: 'Fogo',
    category: 'emoji',
  },
  {
    id: 'star',
    url: 'https://cdn.jsdelivr.net/npm/emoji-datasource-apple@14.0.0/img/apple/64/2b50.png',
    label: 'Estrela',
    category: 'emoji',
  },
  {
    id: 'party',
    url: 'https://cdn.jsdelivr.net/npm/emoji-datasource-apple@14.0.0/img/apple/64/1f389.png',
    label: 'Festa',
    category: 'emoji',
  },
  {
    id: 'cool',
    url: 'https://cdn.jsdelivr.net/npm/emoji-datasource-apple@14.0.0/img/apple/64/1f60e.png',
    label: 'Legal',
    category: 'emoji',
  },
  {
    id: 'love',
    url: 'https://cdn.jsdelivr.net/npm/emoji-datasource-apple@14.0.0/img/apple/64/1f970.png',
    label: 'Amor',
    category: 'emoji',
  },
  {
    id: 'cry',
    url: 'https://cdn.jsdelivr.net/npm/emoji-datasource-apple@14.0.0/img/apple/64/1f622.png',
    label: 'Choro',
    category: 'emoji',
  },
  {
    id: 'rocket',
    url: 'https://cdn.jsdelivr.net/npm/emoji-datasource-apple@14.0.0/img/apple/64/1f680.png',
    label: 'Foguete',
    category: 'emoji',
  },
  {
    id: 'sparkles',
    url: 'https://cdn.jsdelivr.net/npm/emoji-datasource-apple@14.0.0/img/apple/64/2728.png',
    label: 'Brilho',
    category: 'emoji',
  },
  {
    id: 'thumbsup',
    url: 'https://cdn.jsdelivr.net/npm/emoji-datasource-apple@14.0.0/img/apple/64/1f44d.png',
    label: 'Joia',
    category: 'emoji',
  },
];

export default function StickersTool({
  visible,
  onSelect,
  onCancel,
}: StickersToolProps) {
  const [activeTab, setActiveTab] = useState<StickerTab>('emojis');
  const [searchQuery, setSearchQuery] = useState('');

  const filteredStickers = EMOJI_STICKERS.filter((s) =>
    s.label.toLowerCase().includes(searchQuery.toLowerCase())
  );

  const handleSelectSticker = (sticker: Sticker) => {
    const element: StickerElement = {
      id: `sticker-${Date.now()}`,
      type: 'sticker',
      stickerUrl: sticker.url,
      x: 150,
      y: 300,
      rotation: 0,
      scale: 1,
      width: 80,
      height: 80,
    };
    onSelect(element);
  };

  return (
    <Modal
      visible={visible}
      animationType="slide"
      transparent
      onRequestClose={onCancel}
    >
      <View style={styles.container}>
        <BlurView intensity={40} style={StyleSheet.absoluteFillObject} />

        <View style={styles.content}>
          {/* Header */}
          <View style={styles.header}>
            <TouchableOpacity onPress={onCancel} style={styles.headerButton}>
              <MaterialCommunityIcons name="close" size={24} color="#fff" />
            </TouchableOpacity>
            <Text style={styles.headerTitle}>Stickers & GIFs</Text>
            <View style={styles.headerButton} />
          </View>

          {/* Tabs */}
          <View style={styles.tabs}>
            <TouchableOpacity
              style={[styles.tab, activeTab === 'emojis' && styles.tabActive]}
              onPress={() => setActiveTab('emojis')}
            >
              <MaterialCommunityIcons
                name="emoticon"
                size={20}
                color={activeTab === 'emojis' ? '#fff' : theme.colors.textSecondary}
              />
              <Text
                style={[
                  styles.tabLabel,
                  activeTab === 'emojis' && styles.tabLabelActive,
                ]}
              >
                Emojis
              </Text>
            </TouchableOpacity>

            <TouchableOpacity
              style={[styles.tab, activeTab === 'gifs' && styles.tabActive]}
              onPress={() => setActiveTab('gifs')}
            >
              <MaterialCommunityIcons
                name="file-gif-box"
                size={20}
                color={activeTab === 'gifs' ? '#fff' : theme.colors.textSecondary}
              />
              <Text
                style={[styles.tabLabel, activeTab === 'gifs' && styles.tabLabelActive]}
              >
                GIFs
              </Text>
            </TouchableOpacity>

            <TouchableOpacity
              style={[styles.tab, activeTab === 'stickers' && styles.tabActive]}
              onPress={() => setActiveTab('stickers')}
            >
              <MaterialCommunityIcons
                name="sticker-emoji"
                size={20}
                color={activeTab === 'stickers' ? '#fff' : theme.colors.textSecondary}
              />
              <Text
                style={[
                  styles.tabLabel,
                  activeTab === 'stickers' && styles.tabLabelActive,
                ]}
              >
                Stickers
              </Text>
            </TouchableOpacity>
          </View>

          {/* Search */}
          <View style={styles.searchContainer}>
            <MaterialCommunityIcons
              name="magnify"
              size={20}
              color={theme.colors.textTertiary}
            />
            <TextInput
              style={styles.searchInput}
              placeholder="Buscar..."
              placeholderTextColor={theme.colors.textTertiary}
              value={searchQuery}
              onChangeText={setSearchQuery}
            />
            {searchQuery.length > 0 && (
              <TouchableOpacity onPress={() => setSearchQuery('')}>
                <MaterialCommunityIcons
                  name="close-circle"
                  size={20}
                  color={theme.colors.textTertiary}
                />
              </TouchableOpacity>
            )}
          </View>

          {/* Stickers Grid */}
          {activeTab === 'emojis' && (
            <FlatList
              data={filteredStickers}
              renderItem={({ item }) => (
                <TouchableOpacity
                  style={styles.stickerItem}
                  onPress={() => handleSelectSticker(item)}
                  activeOpacity={0.7}
                >
                  <View style={styles.stickerImageContainer}>
                    <Image source={{ uri: item.url }} style={styles.stickerImage} />
                  </View>
                </TouchableOpacity>
              )}
              keyExtractor={(item) => item.id}
              numColumns={4}
              contentContainerStyle={styles.stickersGrid}
              showsVerticalScrollIndicator={false}
              ListEmptyComponent={
                <View style={styles.emptyState}>
                  <MaterialCommunityIcons
                    name="emoticon-sad"
                    size={48}
                    color={theme.colors.textTertiary}
                  />
                  <Text style={styles.emptyText}>Nenhum sticker encontrado</Text>
                </View>
              }
            />
          )}

          {activeTab === 'gifs' && (
            <View style={styles.comingSoon}>
              <MaterialCommunityIcons
                name="file-gif-box"
                size={64}
                color={theme.colors.textTertiary}
              />
              <Text style={styles.comingSoonText}>GIFs em breve</Text>
              <Text style={styles.comingSoonSubtext}>
                Integra√ß√£o com Giphy em desenvolvimento
              </Text>
            </View>
          )}

          {activeTab === 'stickers' && (
            <View style={styles.comingSoon}>
              <MaterialCommunityIcons
                name="sticker-emoji"
                size={64}
                color={theme.colors.textTertiary}
              />
              <Text style={styles.comingSoonText}>Stickers personalizados em breve</Text>
            </View>
          )}
        </View>
      </View>
    </Modal>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'flex-end',
  },
  content: {
    backgroundColor: theme.colors.bgSecondary,
    borderTopLeftRadius: theme.borderRadius.xxl,
    borderTopRightRadius: theme.borderRadius.xxl,
    paddingTop: theme.spacing.md,
    maxHeight: '85%',
  },
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    paddingHorizontal: theme.spacing.lg,
    paddingBottom: theme.spacing.lg,
  },
  headerButton: {
    width: 40,
    height: 40,
    alignItems: 'center',
    justifyContent: 'center',
  },
  headerTitle: {
    ...theme.typography.h4,
    color: theme.colors.textPrimary,
  },
  tabs: {
    flexDirection: 'row',
    paddingHorizontal: theme.spacing.lg,
    gap: theme.spacing.sm,
    marginBottom: theme.spacing.lg,
  },
  tab: {
    flex: 1,
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    gap: 6,
    paddingVertical: theme.spacing.md,
    borderRadius: theme.borderRadius.md,
    backgroundColor: 'rgba(255,255,255,0.05)',
  },
  tabActive: {
    backgroundColor: theme.colors.primary,
  },
  tabLabel: {
    ...theme.typography.caption,
    color: theme.colors.textSecondary,
    fontWeight: '600',
  },
  tabLabelActive: {
    color: '#fff',
  },
  searchContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: theme.spacing.sm,
    marginHorizontal: theme.spacing.lg,
    marginBottom: theme.spacing.lg,
    paddingHorizontal: theme.spacing.md,
    paddingVertical: theme.spacing.sm,
    borderRadius: theme.borderRadius.md,
    backgroundColor: 'rgba(255,255,255,0.05)',
  },
  searchInput: {
    flex: 1,
    ...theme.typography.bodySmall,
    color: theme.colors.textPrimary,
    paddingVertical: theme.spacing.sm,
  },
  stickersGrid: {
    paddingHorizontal: theme.spacing.lg,
    paddingBottom: theme.spacing.xl,
  },
  stickerItem: {
    width: '25%',
    aspectRatio: 1,
    padding: theme.spacing.sm,
  },
  stickerImageContainer: {
    flex: 1,
    borderRadius: theme.borderRadius.md,
    backgroundColor: 'rgba(255,255,255,0.05)',
    padding: theme.spacing.sm,
    alignItems: 'center',
    justifyContent: 'center',
  },
  stickerImage: {
    width: '80%',
    height: '80%',
    resizeMode: 'contain',
  },
  emptyState: {
    alignItems: 'center',
    justifyContent: 'center',
    paddingVertical: theme.spacing.xxxl,
  },
  emptyText: {
    ...theme.typography.bodySmall,
    color: theme.colors.textSecondary,
    marginTop: theme.spacing.md,
  },
  comingSoon: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    paddingVertical: theme.spacing.xxxl,
  },
  comingSoonText: {
    ...theme.typography.h4,
    color: theme.colors.textPrimary,
    marginTop: theme.spacing.lg,
  },
  comingSoonSubtext: {
    ...theme.typography.bodySmall,
    color: theme.colors.textSecondary,
    marginTop: theme.spacing.sm,
  },
});
üí¨ 8. INTERACTIVETOOL.TSX
TypeScript

// src/story/components/tools/InteractiveTool.tsx

import React, { useState } from 'react';
import {
  View,
  StyleSheet,
  TouchableOpacity,
  Text,
  Modal,
  ScrollView,
  TextInput,
} from 'react-native';
import { LinearGradient } from 'expo-linear-gradient';
import { BlurView } from 'expo-blur';
import { MaterialCommunityIcons } from '@expo/vector-icons';
import {
  StoryElement,
  MentionElement,
  LocationElement,
  PollElement,
  QuestionElement,
  CountdownElement,
  DateTimeElement,
} from '../../types';
import theme from '../../styles/theme';

interface InteractiveToolProps {
  visible: boolean;
  onSelect: (element: StoryElement) => void;
  onCancel: () => void;
}

type ToolType =
  | 'none'
  | 'mention'
  | 'location'
  | 'poll'
  | 'question'
  | 'countdown'
  | 'datetime';

interface InteractiveTool {
  id: ToolType;
  label: string;
  icon: string;
  color: string;
  description: string;
}

const TOOLS: InteractiveTool[] = [
  {
    id: 'mention',
    label: 'Marcar Pessoa',
    icon: 'at',
    color: '#3b82f6',
    description: 'Mencione algu√©m no seu story',
  },
  {
    id: 'location',
    label: 'Localiza√ß√£o',
    icon: 'map-marker',
    color: '#ef4444',
    description: 'Adicione sua localiza√ß√£o',
  },
  {
    id: 'poll',
    label: 'Enquete',
    icon: 'poll',
    color: '#8b5cf6',
    description: 'Fa√ßa uma pergunta com op√ß√µes',
  },
  {
    id: 'question',
    label: 'Caixa de Perguntas',
    icon: 'help-circle',
    color: '#ec4899',
    description: 'Receba perguntas dos seus seguidores',
  },
  {
    id: 'countdown',
    label: 'Contagem Regressiva',
    icon: 'timer-sand',
    color: '#f59e0b',
    description: 'Contagem regressiva para um evento',
  },
  {
    id: 'datetime',
    label: 'Data e Hora',
    icon: 'calendar-clock',
    color: '#10b981',
    description: 'Mostre data e hora atuais',
  },
];

const MOCK_USERS = [
  { id: '1', name: 'Jo√£o Silva', username: '@joao' },
  { id: '2', name: 'Maria Santos', username: '@maria' },
  { id: '3', name: 'Pedro Costa', username: '@pedro' },
  { id: '4', name: 'Ana Oliveira', username: '@ana' },
];

const MOCK_LOCATIONS = [
  { id: '1', name: 'S√£o Paulo, Brasil', lat: -23.5505, lon: -46.6333 },
  { id: '2', name: 'Rio de Janeiro, Brasil', lat: -22.9068, lon: -43.1729 },
  { id: '3', name: 'Belo Horizonte, Brasil', lat: -19.9191, lon: -43.9386 },
];

export default function InteractiveTool({
  visible,
  onSelect,
  onCancel,
}: InteractiveToolProps) {
  const [activeTool, setActiveTool] = useState<ToolType>('none');
  const [searchQuery, setSearchQuery] = useState('');
  const [pollQuestion, setPollQuestion] = useState('');
  const [pollOptions, setPollOptions] = useState(['', '']);
  const [questionText, setQuestionText] = useState('Fa√ßa uma pergunta');

  const handleBack = () => {
    setActiveTool('none');
    setSearchQuery('');
    setPollQuestion('');
    setPollOptions(['', '']);
  };

  const handleMention = (user: typeof MOCK_USERS[0]) => {
    const element: MentionElement = {
      id: `mention-${Date.now()}`,
      type: 'mention',
      userId: user.id,
      userName: user.name,
      x: 150,
      y: 300,
    };
    onSelect(element);
  };

  const handleLocation = (location: typeof MOCK_LOCATIONS[0]) => {
    const element: LocationElement = {
      id: `location-${Date.now()}`,
      type: 'location',
      name: location.name,
      latitude: location.lat,
      longitude: location.lon,
      x: 150,
      y: 300,
    };
    onSelect(element);
  };

  const handleCreatePoll = () => {
    if (!pollQuestion.trim()) return;

    const validOptions = pollOptions.filter((o) => o.trim());
    if (validOptions.length < 2) return;

    const element: PollElement = {
      id: `poll-${Date.now()}`,
      type: 'poll',
      question: pollQuestion,
      options: validOptions,
      x: 50,
      y: 400,
    };
    onSelect(element);
  };

  const handleCreateQuestion = () => {
    const element: QuestionElement = {
      id: `question-${Date.now()}`,
      type: 'question',
      question: questionText,
      x: 50,
      y: 400,
    };
    onSelect(element);
  };

  const handleCreateDatetime = () => {
    const element: DateTimeElement = {
      id: `datetime-${Date.now()}`,
      type: 'datetime',
      format: 'datetime',
      x: 150,
      y: 300,
    };
    onSelect(element);
  };

  const renderToolContent = () => {
    switch (activeTool) {
      case 'mention':
        const filteredUsers = MOCK_USERS.filter((u) =>
          u.name.toLowerCase().includes(searchQuery.toLowerCase())
        );
        return (
          <View style={styles.toolContent}>
            <TextInput
              style={styles.searchInput}
              placeholder="Buscar pessoa..."
              placeholderTextColor={theme.colors.textTertiary}
              value={searchQuery}
              onChangeText={setSearchQuery}
            />
            <ScrollView style={styles.listContainer}>
              {filteredUsers.map((user) => (
                <TouchableOpacity
                  key={user.id}
                  style={styles.listItem}
                  onPress={() => handleMention(user)}
                >
                  <View style={styles.avatar}>
                    <MaterialCommunityIcons name="account" size={24} color="#fff" />
                  </View>
                  <View style={styles.userInfo}>
                    <Text style={styles.userName}>{user.name}</Text>
                    <Text style={styles.userUsername}>{user.username}</Text>
                  </View>
                  <MaterialCommunityIcons
                    name="chevron-right"
                    size={24}
                    color={theme.colors.textTertiary}
                  />
                </TouchableOpacity>
              ))}
            </ScrollView>
          </View>
        );

      case 'location':
        const filteredLocations = MOCK_LOCATIONS.filter((l) =>
          l.name.toLowerCase().includes(searchQuery.toLowerCase())
        );
        return (
          <View style={styles.toolContent}>
            <TextInput
              style={styles.searchInput}
              placeholder="Buscar local..."
              placeholderTextColor={theme.colors.textTertiary}
              value={searchQuery}
              onChangeText={setSearchQuery}
            />
            <ScrollView style={styles.listContainer}>
              {filteredLocations.map((location) => (
                <TouchableOpacity
                  key={location.id}
                  style={styles.listItem}
                  onPress={() => handleLocation(location)}
                >
                  <View style={[styles.avatar, { backgroundColor: '#ef4444' }]}>
                    <MaterialCommunityIcons name="map-marker" size={24} color="#fff" />
                  </View>
                  <View style={styles.userInfo}>
                    <Text style={styles.userName}>{location.name}</Text>
                  </View>
                  <MaterialCommunityIcons
                    name="chevron-right"
                    size={24}
                    color={theme.colors.textTertiary}
                  />
                </TouchableOpacity>
              ))}
            </ScrollView>
          </View>
        );

      case 'poll':
        return (
          <View style={styles.toolContent}>
            <TextInput
              style={styles.input}
              placeholder="Digite sua pergunta..."
              placeholderTextColor={theme.colors.textTertiary}
              value={pollQuestion}
              onChangeText={setPollQuestion}
            />
            {pollOptions.map((option, index) => (
              <TextInput
                key={index}
                style={styles.input}
                placeholder={`Op√ß√£o ${index + 1}`}
                placeholderTextColor={theme.colors.textTertiary}
                value={option}
                onChangeText={(text) => {
                  const newOptions = [...pollOptions];
                  newOptions[index] = text;
                  setPollOptions(newOptions);
                }}
              />
            ))}
            {pollOptions.length < 4 && (
              <TouchableOpacity
                style={styles.addOptionButton}
                onPress={() => setPollOptions([...pollOptions, ''])}
              >
                <MaterialCommunityIcons name="plus" size={20} color={theme.colors.primary} />
                <Text style={styles.addOptionText}>Adicionar op√ß√£o</Text>
              </TouchableOpacity>
            )}
            <TouchableOpacity style={styles.createButton} onPress={handleCreatePoll}>
              <LinearGradient
                colors={theme.colors.gradientPrimary}
                style={styles.createGradient}
              >
                <Text style={styles.createText}>Criar Enquete</Text>
              </LinearGradient>
            </TouchableOpacity>
          </View>
        );

      case 'question':
        return (
          <View style={styles.toolContent}>
            <TextInput
              style={styles.input}
              placeholder="Texto da caixa de perguntas..."
              placeholderTextColor={theme.colors.textTertiary}
              value={questionText}
              onChangeText={setQuestionText}
            />
            <TouchableOpacity style={styles.createButton} onPress={handleCreateQuestion}>
              <LinearGradient
                colors={theme.colors.gradientPrimary}
                style={styles.createGradient}
              >
                <Text style={styles.createText}>Adicionar Caixa de Perguntas</Text>
              </LinearGradient>
            </TouchableOpacity>
          </View>
        );

      case 'datetime':
        return (
          <View style={styles.toolContent}>
            <View style={styles.infoBox}>
              <MaterialCommunityIcons
                name="information"
                size={24}
                color={theme.colors.info}
              />
              <Text style={styles.infoText}>
                A data e hora ser√£o atualizadas automaticamente
              </Text>
            </View>
            <TouchableOpacity style={styles.createButton} onPress={handleCreateDatetime}>
              <LinearGradient
                colors={theme.colors.gradientPrimary}
                style={styles.createGradient}
              >
                <Text style={styles.createText}>Adicionar Data e Hora</Text>
              </LinearGradient>
            </TouchableOpacity>
          </View>
        );

      case 'countdown':
        return (
          <View style={styles.toolContent}>
            <View style={styles.comingSoon}>
              <MaterialCommunityIcons
                name="timer-sand"
                size={64}
                color={theme.colors.textTertiary}
              />
              <Text style={styles.comingSoonText}>Em breve</Text>
            </View>
          </View>
        );

      default:
        return null;
    }
  };

  return (
    <Modal
      visible={visible}
      animationType="slide"
      transparent
      onRequestClose={onCancel}
    >
      <View style={styles.container}>
        <BlurView intensity={40} style={StyleSheet.absoluteFillObject} />

        <View style={styles.content}>
          {/* Header */}
          <View style={styles.header}>
            {activeTool !== 'none' ? (
              <TouchableOpacity onPress={handleBack} style={styles.headerButton}>
                <MaterialCommunityIcons name="arrow-left" size={24} color="#fff" />
              </TouchableOpacity>
            ) : (
              <TouchableOpacity onPress={onCancel} style={styles.headerButton}>
                <MaterialCommunityIcons name="close" size={24} color="#fff" />
              </TouchableOpacity>
            )}
            <Text style={styles.headerTitle}>
              {activeTool !== 'none'
                ? TOOLS.find((t) => t.id === activeTool)?.label
                : 'Elementos Interativos'}
            </Text>
            <View style={styles.headerButton} />
          </View>

          {activeTool === 'none' ? (
            <ScrollView
              contentContainerStyle={styles.toolsGrid}
              showsVerticalScrollIndicator={false}
            >
              {TOOLS.map((tool) => (
                <TouchableOpacity
                  key={tool.id}
                  style={styles.toolCard}
                  onPress={() => setActiveTool(tool.id)}
                  activeOpacity={0.8}
                >
                  <LinearGradient
                    colors={[tool.color + '30', tool.color + '10']}
                    style={styles.toolCardGradient}
                  >
                    <View style={[styles.toolIcon, { backgroundColor: tool.color }]}>
                      <MaterialCommunityIcons name={tool.icon as any} size={32} color="#fff" />
                    </View>
                    <Text style={styles.toolLabel}>{tool.label}</Text>
                    <Text style={styles.toolDescription}>{tool.description}</Text>
                    <MaterialCommunityIcons
                      name="chevron-right"
                      size={24}
                      color={theme.colors.textTertiary}
                      style={styles.toolArrow}
                    />
                  </LinearGradient>
                </TouchableOpacity>
              ))}
            </ScrollView>
          ) : (
            renderToolContent()
          )}
        </View>
      </View>
    </Modal>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'flex-end',
  },
  content: {
    backgroundColor: theme.colors.bgSecondary,
    borderTopLeftRadius: theme.borderRadius.xxl,
    borderTopRightRadius: theme.borderRadius.xxl,
    paddingTop: theme.spacing.md,
    maxHeight: '85%',
  },
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    paddingHorizontal: theme.spacing.lg,
    paddingBottom: theme.spacing.lg,
  },
  headerButton: {
    width: 40,
    height: 40,
    alignItems: 'center',
    justifyContent: 'center',
  },
  headerTitle: {
    ...theme.typography.h4,
    color: theme.colors.textPrimary,
  },
  toolsGrid: {
    padding: theme.spacing.lg,
    gap: theme.spacing.md,
  },
  toolCard: {
    borderRadius: theme.borderRadius.lg,
    overflow: 'hidden',
    ...theme.shadows.md,
  },
  toolCardGradient: {
    padding: theme.spacing.lg,
    position: 'relative',
  },
  toolIcon: {
    width: 64,
    height: 64,
    borderRadius: theme.borderRadius.lg,
    alignItems: 'center',
    justifyContent: 'center',
    marginBottom: theme.spacing.md,
  },
  toolLabel: {
    ...theme.typography.h4,
    color: theme.colors.textPrimary,
    marginBottom: 4,
  },
  toolDescription: {
    ...theme.typography.bodySmall,
    color: theme.colors.textSecondary,
  },
  toolArrow: {
    position: 'absolute',
    top: theme.spacing.lg,
    right: theme.spacing.lg,
  },
  toolContent: {
    padding: theme.spacing.lg,
  },
  searchInput: {
    ...theme.typography.bodySmall,
    color: theme.colors.textPrimary,
    backgroundColor: 'rgba(255,255,255,0.05)',
    borderRadius: theme.borderRadius.md,
    paddingHorizontal: theme.spacing.md,
    paddingVertical: theme.spacing.md,
    marginBottom: theme.spacing.md,
  },
  input: {
    ...theme.typography.bodySmall,
    color: theme.colors.textPrimary,
    backgroundColor: 'rgba(255,255,255,0.05)',
    borderRadius: theme.borderRadius.md,
    paddingHorizontal: theme.spacing.md,
    paddingVertical: theme.spacing.md,
    marginBottom: theme.spacing.md,
    borderWidth: 1,
    borderColor: 'rgba(255,255,255,0.1)',
  },
  listContainer: {
    maxHeight: 400,
  },
  listItem: {
    flexDirection: 'row',
    alignItems: 'center',
    padding: theme.spacing.md,
    borderRadius: theme.borderRadius.md,
    backgroundColor: 'rgba(255,255,255,0.05)',
    marginBottom: theme.spacing.sm,
  },
  avatar: {
    width: 48,
    height: 48,
    borderRadius: 24,
    backgroundColor: theme.colors.primary,
    alignItems: 'center',
    justifyContent: 'center',
    marginRight: theme.spacing.md,
  },
  userInfo: {
    flex: 1,
  },
  userName: {
    ...theme.typography.bodySmall,
    color: theme.colors.textPrimary,
    fontWeight: '600',
  },
  userUsername: {
    ...theme.typography.caption,
    color: theme.colors.textSecondary,
  },
  addOptionButton: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    gap: 6,
    paddingVertical: theme.spacing.md,
    marginBottom: theme.spacing.md,
  },
  addOptionText: {
    ...theme.typography.bodySmall,
    color: theme.colors.primary,
    fontWeight: '600',
  },
  createButton: {
    borderRadius: theme.borderRadius.lg,
    overflow: 'hidden',
    marginTop: theme.spacing.md,
  },
  createGradient: {
    paddingVertical: theme.spacing.lg,
    alignItems: 'center',
  },
  createText: {
    ...theme.typography.button,
    color: '#fff',
  },
  infoBox: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: theme.spacing.md,
    padding: theme.spacing.md,
    borderRadius: theme.borderRadius.md,
    backgroundColor: 'rgba(59, 130, 246, 0.1)',
    marginBottom: theme.spacing.lg,
  },
  infoText: {
    ...theme.typography.bodySmall,
    color: theme.colors.textSecondary,
    flex: 1,
  },
  comingSoon: {
    alignItems: 'center',
    justifyContent: 'center',
    paddingVertical: theme.spacing.xxxl * 2,
  },
  comingSoonText: {
    ...theme.typography.h4,
    color: theme.colors.textSecondary,
    marginTop: theme.spacing.lg,
  },
});








PRIVACYSELECTOR.TSX
TypeScript

// src/story/components/ui/PrivacySelector.tsx

import React, { useState } from 'react';
import {
  View,
  StyleSheet,
  TouchableOpacity,
  Text,
  Modal,
  ScrollView,
  Switch,
} from 'react-native';
import { LinearGradient } from 'expo-linear-gradient';
import { BlurView } from 'expo-blur';
import { MaterialCommunityIcons } from '@expo/vector-icons';
import { PrivacySettings, PrivacyAudience } from '../../types';
import theme from '../../styles/theme';

interface PrivacySelectorProps {
  visible: boolean;
  initialSettings: PrivacySettings;
  onConfirm: (settings: PrivacySettings) => void;
  onCancel: () => void;
}

interface AudienceOption {
  id: PrivacyAudience;
  label: string;
  icon: string;
  description: string;
  color: string;
}

const AUDIENCE_OPTIONS: AudienceOption[] = [
  {
    id: 'todos',
    label: 'Todos',
    icon: 'earth',
    description: 'Qualquer pessoa pode ver',
    color: '#3b82f6',
  },
  {
    id: 'amigos',
    label: 'Amigos',
    icon: 'account-group',
    description: 'Apenas seus amigos',
    color: '#10b981',
  },
  {
    id: 'amigos_proximos',
    label: 'Amigos Pr√≥ximos',
    icon: 'account-heart',
    description: 'Seu c√≠rculo mais √≠ntimo',
    color: '#ec4899',
  },
  {
    id: 'amigos_exceto',
    label: 'Amigos Exceto...',
    icon: 'account-minus',
    description: 'Todos os amigos menos alguns',
    color: '#f59e0b',
  },
  {
    id: 'apenas',
    label: 'Apenas...',
    icon: 'account-check',
    description: 'Pessoas espec√≠ficas',
    color: '#8b5cf6',
  },
];

export default function PrivacySelector({
  visible,
  initialSettings,
  onConfirm,
  onCancel,
}: PrivacySelectorProps) {
  const [audience, setAudience] = useState<PrivacyAudience>(initialSettings.audience);
  const [allowReplies, setAllowReplies] = useState(initialSettings.allowReplies);
  const [allowSharing, setAllowSharing] = useState(initialSettings.allowSharing);

  const handleConfirm = () => {
    onConfirm({
      audience,
      allowReplies,
      allowSharing,
    });
  };

  return (
    <Modal
      visible={visible}
      animationType="slide"
      transparent
      onRequestClose={onCancel}
    >
      <View style={styles.container}>
        <BlurView intensity={40} style={StyleSheet.absoluteFillObject} />

        <View style={styles.content}>
          {/* Header */}
          <View style={styles.header}>
            <TouchableOpacity onPress={onCancel} style={styles.headerButton}>
              <MaterialCommunityIcons name="close" size={24} color="#fff" />
            </TouchableOpacity>
            <Text style={styles.headerTitle}>Privacidade</Text>
            <TouchableOpacity onPress={handleConfirm} style={styles.headerButton}>
              <MaterialCommunityIcons
                name="check"
                size={24}
                color={theme.colors.primary}
              />
            </TouchableOpacity>
          </View>

          <ScrollView
            contentContainerStyle={styles.scrollContent}
            showsVerticalScrollIndicator={false}
          >
            {/* Audience Section */}
            <View style={styles.section}>
              <Text style={styles.sectionTitle}>Quem pode ver</Text>
              {AUDIENCE_OPTIONS.map((option) => (
                <TouchableOpacity
                  key={option.id}
                  style={[
                    styles.audienceCard,
                    audience === option.id && styles.audienceCardActive,
                  ]}
                  onPress={() => setAudience(option.id)}
                  activeOpacity={0.8}
                >
                  <View style={[styles.audienceIcon, { backgroundColor: option.color }]}>
                    <MaterialCommunityIcons
                      name={option.icon as any}
                      size={24}
                      color="#fff"
                    />
                  </View>
                  <View style={styles.audienceInfo}>
                    <Text style={styles.audienceLabel}>{option.label}</Text>
                    <Text style={styles.audienceDescription}>{option.description}</Text>
                  </View>
                  <View
                    style={[
                      styles.radioOuter,
                      audience === option.id && styles.radioOuterActive,
                    ]}
                  >
                    {audience === option.id && <View style={styles.radioInner} />}
                  </View>
                </TouchableOpacity>
              ))}
            </View>

            {/* Divider */}
            <View style={styles.divider} />

            {/* Settings Section */}
            <View style={styles.section}>
              <Text style={styles.sectionTitle}>Configura√ß√µes</Text>

              <View style={styles.settingCard}>
                <View style={styles.settingLeft}>
                  <View style={[styles.settingIcon, { backgroundColor: '#3b82f6' }]}>
                    <MaterialCommunityIcons name="reply" size={20} color="#fff" />
                  </View>
                  <View style={styles.settingInfo}>
                    <Text style={styles.settingLabel}>Permitir Respostas</Text>
                    <Text style={styles.settingDescription}>
                      Pessoas podem responder ao seu story
                    </Text>
                  </View>
                </View>
                <Switch
                  value={allowReplies}
                  onValueChange={setAllowReplies}
                  trackColor={{
                    false: 'rgba(255,255,255,0.2)',
                    true: theme.colors.primary + '60',
                  }}
                  thumbColor={allowReplies ? theme.colors.primary : '#f4f3f4'}
                  ios_backgroundColor="rgba(255,255,255,0.2)"
                />
              </View>

              <View style={styles.settingCard}>
                <View style={styles.settingLeft}>
                  <View style={[styles.settingIcon, { backgroundColor: '#10b981' }]}>
                    <MaterialCommunityIcons name="share-variant" size={20} color="#fff" />
                  </View>
                  <View style={styles.settingInfo}>
                    <Text style={styles.settingLabel}>Permitir Compartilhamento</Text>
                    <Text style={styles.settingDescription}>
                      Pessoas podem compartilhar seu story
                    </Text>
                  </View>
                </View>
                <Switch
                  value={allowSharing}
                  onValueChange={setAllowSharing}
                  trackColor={{
                    false: 'rgba(255,255,255,0.2)',
                    true: theme.colors.primary + '60',
                  }}
                  thumbColor={allowSharing ? theme.colors.primary : '#f4f3f4'}
                  ios_backgroundColor="rgba(255,255,255,0.2)"
                />
              </View>
            </View>

            {/* Info Box */}
            <View style={styles.infoBox}>
              <MaterialCommunityIcons
                name="information"
                size={20}
                color={theme.colors.info}
              />
              <Text style={styles.infoText}>
                Voc√™ pode alterar essas configura√ß√µes a qualquer momento
              </Text>
            </View>
          </ScrollView>

          {/* Confirm Button */}
          <TouchableOpacity
            style={styles.confirmButton}
            onPress={handleConfirm}
            activeOpacity={0.9}
          >
            <LinearGradient
              colors={theme.colors.gradientPrimary}
              style={styles.confirmGradient}
              start={{ x: 0, y: 0 }}
              end={{ x: 1, y: 0 }}
            >
              <Text style={styles.confirmText}>Salvar Configura√ß√µes</Text>
            </LinearGradient>
          </TouchableOpacity>
        </View>
      </View>
    </Modal>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'flex-end',
  },
  content: {
    backgroundColor: theme.colors.bgSecondary,
    borderTopLeftRadius: theme.borderRadius.xxl,
    borderTopRightRadius: theme.borderRadius.xxl,
    paddingTop: theme.spacing.md,
    maxHeight: '90%',
  },
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    paddingHorizontal: theme.spacing.lg,
    paddingBottom: theme.spacing.lg,
  },
  headerButton: {
    width: 40,
    height: 40,
    alignItems: 'center',
    justifyContent: 'center',
  },
  headerTitle: {
    ...theme.typography.h4,
    color: theme.colors.textPrimary,
  },
  scrollContent: {
    paddingHorizontal: theme.spacing.lg,
    paddingBottom: theme.spacing.lg,
  },
  section: {
    marginBottom: theme.spacing.lg,
  },
  sectionTitle: {
    ...theme.typography.h4,
    color: theme.colors.textPrimary,
    marginBottom: theme.spacing.md,
  },
  audienceCard: {
    flexDirection: 'row',
    alignItems: 'center',
    padding: theme.spacing.md,
    borderRadius: theme.borderRadius.lg,
    backgroundColor: 'rgba(255,255,255,0.05)',
    marginBottom: theme.spacing.sm,
    borderWidth: 2,
    borderColor: 'transparent',
  },
  audienceCardActive: {
    borderColor: theme.colors.primary,
    backgroundColor: theme.colors.primary + '20',
  },
  audienceIcon: {
    width: 48,
    height: 48,
    borderRadius: 24,
    alignItems: 'center',
    justifyContent: 'center',
    marginRight: theme.spacing.md,
  },
  audienceInfo: {
    flex: 1,
  },
  audienceLabel: {
    ...theme.typography.bodySmall,
    color: theme.colors.textPrimary,
    fontWeight: '600',
    marginBottom: 2,
  },
  audienceDescription: {
    ...theme.typography.caption,
    color: theme.colors.textSecondary,
  },
  radioOuter: {
    width: 24,
    height: 24,
    borderRadius: 12,
    borderWidth: 2,
    borderColor: theme.colors.textTertiary,
    alignItems: 'center',
    justifyContent: 'center',
  },
  radioOuterActive: {
    borderColor: theme.colors.primary,
  },
  radioInner: {
    width: 12,
    height: 12,
    borderRadius: 6,
    backgroundColor: theme.colors.primary,
  },
  divider: {
    height: 1,
    backgroundColor: 'rgba(255,255,255,0.1)',
    marginVertical: theme.spacing.lg,
  },
  settingCard: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    padding: theme.spacing.md,
    borderRadius: theme.borderRadius.lg,
    backgroundColor: 'rgba(255,255,255,0.05)',
    marginBottom: theme.spacing.sm,
  },
  settingLeft: {
    flexDirection: 'row',
    alignItems: 'center',
    flex: 1,
  },
  settingIcon: {
    width: 40,
    height: 40,
    borderRadius: 20,
    alignItems: 'center',
    justifyContent: 'center',
    marginRight: theme.spacing.md,
  },
  settingInfo: {
    flex: 1,
  },
  settingLabel: {
    ...theme.typography.bodySmall,
    color: theme.colors.textPrimary,
    fontWeight: '600',
    marginBottom: 2,
  },
  settingDescription: {
    ...theme.typography.caption,
    color: theme.colors.textSecondary,
  },
  infoBox: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: theme.spacing.md,
    padding: theme.spacing.md,
    borderRadius: theme.borderRadius.md,
    backgroundColor: 'rgba(59, 130, 246, 0.1)',
    marginTop: theme.spacing.md,
  },
  infoText: {
    ...theme.typography.caption,
    color: theme.colors.textSecondary,
    flex: 1,
  },
  confirmButton: {
    margin: theme.spacing.lg,
    borderRadius: theme.borderRadius.lg,
    overflow: 'hidden',
    ...theme.shadows.lg,
  },
  confirmGradient: {
    paddingVertical: theme.spacing.lg,
    alignItems: 'center',
  },
  confirmText: {
    ...theme.typography.button,
    color: '#fff',
  },
});
‚úÇÔ∏è 10. CROPTOOL.TSX
TypeScript

// src/story/components/tools/CropTool.tsx

import React, { useState } from 'react';
import {
  View,
  StyleSheet,
  TouchableOpacity,
  Text,
  Modal,
  Image,
  Dimensions,
} from 'react-native';
import { LinearGradient } from 'expo-linear-gradient';
import { BlurView } from 'expo-blur';
import { MaterialCommunityIcons } from '@expo/vector-icons';
import Slider from '@react-native-community/slider';
import { Crop, AspectRatio } from '../../types';
import theme from '../../styles/theme';

const { width: SCREEN_WIDTH } = Dimensions.get('window');

interface CropToolProps {
  visible: boolean;
  imageUri: string;
  initialCrop?: Crop;
  onConfirm: (crop: Crop) => void;
  onCancel: () => void;
}

interface RatioOption {
  id: AspectRatio;
  label: string;
  icon: string;
}

const RATIOS: RatioOption[] = [
  { id: '1:1', label: '1:1', icon: 'square' },
  { id: '4:3', label: '4:3', icon: 'rectangle' },
  { id: '16:9', label: '16:9', icon: 'rectangle-outline' },
  { id: '9:16', label: '9:16', icon: 'cellphone' },
  { id: 'free', label: 'Livre', icon: 'crop-free' },
];

export default function CropTool({
  visible,
  imageUri,
  initialCrop,
  onConfirm,
  onCancel,
}: CropToolProps) {
  const [ratio, setRatio] = useState<AspectRatio>(initialCrop?.ratio || '1:1');
  const [zoom, setZoom] = useState(initialCrop?.zoom || 1);
  const [rotation, setRotation] = useState(initialCrop?.rotation || 0);
  const [flipH, setFlipH] = useState(initialCrop?.flipHorizontal || false);
  const [flipV, setFlipV] = useState(initialCrop?.flipVertical || false);

  const handleConfirm = () => {
    const crop: Crop = {
      ratio,
      x: 0,
      y: 0,
      width: 100,
      height: 100,
      zoom,
      rotation,
      flipHorizontal: flipH,
      flipVertical: flipV,
    };
    onConfirm(crop);
  };

  return (
    <Modal
      visible={visible}
      animationType="slide"
      transparent
      onRequestClose={onCancel}
    >
      <View style={styles.container}>
        <BlurView intensity={40} style={StyleSheet.absoluteFillObject} />

        <View style={styles.content}>
          {/* Header */}
          <View style={styles.header}>
            <TouchableOpacity onPress={onCancel} style={styles.headerButton}>
              <MaterialCommunityIcons name="close" size={24} color="#fff" />
            </TouchableOpacity>
            <Text style={styles.headerTitle}>Ajustar Imagem</Text>
            <TouchableOpacity onPress={handleConfirm} style={styles.headerButton}>
              <MaterialCommunityIcons
                name="check"
                size={24}
                color={theme.colors.primary}
              />
            </TouchableOpacity>
          </View>

          {/* Preview */}
          <View style={styles.previewContainer}>
            <Image
              source={{ uri: imageUri }}
              style={[
                styles.previewImage,
                {
                  transform: [
                    { scale: zoom },
                    { rotate: `${rotation}deg` },
                    { scaleX: flipH ? -1 : 1 },
                    { scaleY: flipV ? -1 : 1 },
                  ],
                },
              ]}
            />
          </View>

          {/* Aspect Ratio */}
          <View style={styles.section}>
            <Text style={styles.sectionLabel}>Propor√ß√£o</Text>
            <View style={styles.ratiosContainer}>
              {RATIOS.map((r) => (
                <TouchableOpacity
                  key={r.id}
                  style={[
                    styles.ratioButton,
                    ratio === r.id && styles.ratioButtonActive,
                  ]}
                  onPress={() => setRatio(r.id)}
                >
                  <MaterialCommunityIcons
                    name={r.icon as any}
                    size={20}
                    color={ratio === r.id ? '#fff' : theme.colors.textSecondary}
                  />
                  <Text
                    style={[
                      styles.ratioLabel,
                      ratio === r.id && styles.ratioLabelActive,
                    ]}
                  >
                    {r.label}
                  </Text>
                </TouchableOpacity>
              ))}
            </View>
          </View>

          {/* Zoom */}
          <View style={styles.section}>
            <View style={styles.sectionHeader}>
              <MaterialCommunityIcons name="magnify" size={20} color="#fff" />
              <Text style={styles.sectionTitle}>Zoom</Text>
              <Text style={styles.sectionValue}>{Math.round(zoom * 100)}%</Text>
            </View>
            <Slider
              style={styles.slider}
              minimumValue={1}
              maximumValue={3}
              value={zoom}
              onValueChange={setZoom}
              step={0.1}
              minimumTrackTintColor={theme.colors.primary}
              maximumTrackTintColor="rgba(255,255,255,0.2)"
              thumbTintColor={theme.colors.primary}
            />
          </View>

          {/* Rotation */}
          <View style={styles.section}>
            <View style={styles.sectionHeader}>
              <MaterialCommunityIcons name="rotate-right" size={20} color="#fff" />
              <Text style={styles.sectionTitle}>Rota√ß√£o</Text>
              <Text style={styles.sectionValue}>{Math.round(rotation)}¬∞</Text>
            </View>
            <Slider
              style={styles.slider}
              minimumValue={0}
              maximumValue={360}
              value={rotation}
              onValueChange={setRotation}
              step={5}
              minimumTrackTintColor={theme.colors.primary}
              maximumTrackTintColor="rgba(255,255,255,0.2)"
              thumbTintColor={theme.colors.primary}
            />
          </View>

          {/* Flip Controls */}
          <View style={styles.section}>
            <Text style={styles.sectionLabel}>Espelhar</Text>
            <View style={styles.flipButtons}>
              <TouchableOpacity
                style={[styles.flipButton, flipH && styles.flipButtonActive]}
                onPress={() => setFlipH(!flipH)}
              >
                <MaterialCommunityIcons
                  name="flip-horizontal"
                  size={24}
                  color={flipH ? '#fff' : theme.colors.textSecondary}
                />
                <Text
                  style={[styles.flipLabel, flipH && styles.flipLabelActive]}
                >
                  Horizontal
                </Text>
              </TouchableOpacity>

              <TouchableOpacity
                style={[styles.flipButton, flipV && styles.flipButtonActive]}
                onPress={() => setFlipV(!flipV)}
              >
                <MaterialCommunityIcons
                  name="flip-vertical"
                  size={24}
                  color={flipV ? '#fff' : theme.colors.textSecondary}
                />
                <Text
                  style={[styles.flipLabel, flipV && styles.flipLabelActive]}
                >
                  Vertical
                </Text>
              </TouchableOpacity>
            </View>
          </View>

          {/* Confirm Button */}
          <TouchableOpacity
            style={styles.confirmButton}
            onPress={handleConfirm}
            activeOpacity={0.9}
          >
            <LinearGradient
              colors={theme.colors.gradientPrimary}
              style={styles.confirmGradient}
              start={{ x: 0, y: 0 }}
              end={{ x: 1, y: 0 }}
            >
              <Text style={styles.confirmText}>Aplicar Ajustes</Text>
            </LinearGradient>
          </TouchableOpacity>
        </View>
      </View>
    </Modal>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'flex-end',
  },
  content: {
    backgroundColor: theme.colors.bgSecondary,
    borderTopLeftRadius: theme.borderRadius.xxl,
    borderTopRightRadius: theme.borderRadius.xxl,
    paddingTop: theme.spacing.md,
    maxHeight: '90%',
  },
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    paddingHorizontal: theme.spacing.lg,
    paddingBottom: theme.spacing.lg,
  },
  headerButton: {
    width: 40,
    height: 40,
    alignItems: 'center',
    justifyContent: 'center',
  },
  headerTitle: {
    ...theme.typography.h4,
    color: theme.colors.textPrimary,
  },
  previewContainer: {
    width: SCREEN_WIDTH - 32,
    height: 280,
    marginHorizontal: theme.spacing.lg,
    marginBottom: theme.spacing.xl,
    borderRadius: theme.borderRadius.xl,
    overflow: 'hidden',
    backgroundColor: 'rgba(0,0,0,0.3)',
    alignItems: 'center',
    justifyContent: 'center',
  },
  previewImage: {
    width: '100%',
    height: '100%',
    resizeMode: 'cover',
  },
  section: {
    paddingHorizontal: theme.spacing.lg,
    marginBottom: theme.spacing.lg,
  },
  sectionLabel: {
    ...theme.typography.bodySmall,
    color: theme.colors.textPrimary,
    fontWeight: '600',
    marginBottom: theme.spacing.sm,
  },
  sectionHeader: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: theme.spacing.sm,
    marginBottom: theme.spacing.sm,
  },
  sectionTitle: {
    ...theme.typography.bodySmall,
    color: theme.colors.textPrimary,
    fontWeight: '600',
    flex: 1,
  },
  sectionValue: {
    ...theme.typography.bodySmall,
    color: theme.colors.primary,
    fontWeight: '700',
  },
  slider: {
    width: '100%',
    height: 40,
  },
  ratiosContainer: {
    flexDirection: 'row',
    gap: theme.spacing.sm,
  },
  ratioButton: {
    flex: 1,
    flexDirection: 'column',
    alignItems: 'center',
    gap: 6,
    paddingVertical: theme.spacing.md,
    borderRadius: theme.borderRadius.md,
    backgroundColor: 'rgba(255,255,255,0.05)',
  },
  ratioButtonActive: {
    backgroundColor: theme.colors.primary,
  },
  ratioLabel: {
    ...theme.typography.caption,
    color: theme.colors.textSecondary,
    fontWeight: '600',
  },
  ratioLabelActive: {
    color: '#fff',
  },
  flipButtons: {
    flexDirection: 'row',
    gap: theme.spacing.md,
  },
  flipButton: {
    flex: 1,
    flexDirection: 'column',
    alignItems: 'center',
    gap: 6,
    paddingVertical: theme.spacing.md,
    borderRadius: theme.borderRadius.md,
    backgroundColor: 'rgba(255,255,255,0.05)',
  },
  flipButtonActive: {
    backgroundColor: theme.colors.primary,
  },
  flipLabel: {
    ...theme.typography.caption,
    color: theme.colors.textSecondary,
    fontWeight: '600',
  },
  flipLabelActive: {
    color: '#fff',
  },
  confirmButton: {
    margin: theme.spacing.lg,
    borderRadius: theme.borderRadius.lg,
    overflow: 'hidden',
    ...theme.shadows.lg,
  },
  confirmGradient: {
    paddingVertical: theme.spacing.lg,
    alignItems: 'center',
  },
  confirmText: {
    ...theme.typography.button,
    color: '#fff',
  },
});






HOOKS/USESTORYEDITOR.TS
TypeScript

// src/story/hooks/useStoryEditor.ts

import { useState, useCallback } from 'react';
import {
  StoryElement,
  StoryComposition,
  FilterType,
  TextElement,
  DrawElement,
  StickerElement,
} from '../types';

export function useStoryEditor() {
  const [elements, setElements] = useState<StoryElement[]>([]);
  const [selectedElement, setSelectedElement] = useState<StoryElement | null>(null);
  const [filter, setFilter] = useState<FilterType>('original');
  const [history, setHistory] = useState<StoryElement[][]>([[]]);
  const [historyIndex, setHistoryIndex] = useState(0);

  const addElement = useCallback((element: StoryElement) => {
    setElements((prev) => {
      const newElements = [...prev, element];
      updateHistory(newElements);
      return newElements;
    });
  }, []);

  const updateElement = useCallback((updatedElement: StoryElement) => {
    setElements((prev) => {
      const newElements = prev.map((el) =>
        el.id === updatedElement.id ? updatedElement : el
      );
      updateHistory(newElements);
      return newElements;
    });
  }, []);

  const deleteElement = useCallback((id: string) => {
    setElements((prev) => {
      const newElements = prev.filter((el) => el.id !== id);
      updateHistory(newElements);
      return newElements;
    });
  }, []);

  const updateHistory = useCallback((newElements: StoryElement[]) => {
    setHistory((prev) => {
      const newHistory = prev.slice(0, historyIndex + 1);
      newHistory.push(newElements);
      if (newHistory.length > 50) newHistory.shift();
      return newHistory;
    });
    setHistoryIndex((prev) => Math.min(prev + 1, 49));
  }, [historyIndex]);

  const undo = useCallback(() => {
    if (historyIndex > 0) {
      setHistoryIndex(historyIndex - 1);
      setElements(history[historyIndex - 1]);
    }
  }, [historyIndex, history]);

  const redo = useCallback(() => {
    if (historyIndex < history.length - 1) {
      setHistoryIndex(historyIndex + 1);
      setElements(history[historyIndex + 1]);
    }
  }, [historyIndex, history]);

  const canUndo = historyIndex > 0;
  const canRedo = historyIndex < history.length - 1;

  const clearAll = useCallback(() => {
    setElements([]);
    setHistory([[]]);
    setHistoryIndex(0);
    setSelectedElement(null);
  }, []);

  const getComposition = useCallback((): StoryComposition => {
    return {
      elements,
      filter,
    };
  }, [elements, filter]);

  return {
    elements,
    selectedElement,
    filter,
    addElement,
    updateElement,
    deleteElement,
    setSelectedElement,
    setFilter,
    undo,
    redo,
    canUndo,
    canRedo,
    clearAll,
    getComposition,
  };
}
ü™ù 12. HOOKS/USEHISTORYMANAGER.TS
TypeScript

// src/story/hooks/useHistoryManager.ts

import { useState, useCallback } from 'react';

interface HistoryState<T> {
  past: T[];
  present: T;
  future: T[];
}

export function useHistoryManager<T>(initialState: T, maxHistory: number = 50) {
  const [state, setState] = useState<HistoryState<T>>({
    past: [],
    present: initialState,
    future: [],
  });

  const push = useCallback(
    (newState: T) => {
      setState((prev) => {
        const newPast = [...prev.past, prev.present];
        if (newPast.length > maxHistory) {
          newPast.shift();
        }
        return {
          past: newPast,
          present: newState,
          future: [],
        };
      });
    },
    [maxHistory]
  );

  const undo = useCallback(() => {
    setState((prev) => {
      if (prev.past.length === 0) return prev;

      const newPast = [...prev.past];
      const newPresent = newPast.pop()!;

      return {
        past: newPast,
        present: newPresent,
        future: [prev.present, ...prev.future],
      };
    });
  }, []);

  const redo = useCallback(() => {
    setState((prev) => {
      if (prev.future.length === 0) return prev;

      const newFuture = [...prev.future];
      const newPresent = newFuture.shift()!;

      return {
        past: [...prev.past, prev.present],
        present: newPresent,
        future: newFuture,
      };
    });
  }, []);

  const reset = useCallback((newState: T) => {
    setState({
      past: [],
      present: newState,
      future: [],
    });
  }, []);

  const canUndo = state.past.length > 0;
  const canRedo = state.future.length > 0;

  return {
    state: state.present,
    push,
    undo,
    redo,
    reset,
    canUndo,
    canRedo,
  };
}
ü™ù 13. HOOKS/USEGESTURES.TS
TypeScript

// src/story/hooks/useGestures.ts

import { useRef, useCallback } from 'react';
import { Animated, PanResponder } from 'react-native';
import { StoryElement } from '../types';

interface GestureHandlers {
  panResponder: any;
  position: Animated.ValueXY;
  scale: Animated.Value;
  rotation: Animated.Value;
}

export function useGestures(
  element: StoryElement,
  onUpdate: (element: StoryElement) => void
): GestureHandlers {
  const position = useRef(new Animated.ValueXY({ x: element.x, y: element.y })).current;
  const scale = useRef(new Animated.Value(element.scale || 1)).current;
  const rotation = useRef(new Animated.Value(element.rotation || 0)).current;

  const lastScale = useRef(1);
  const lastRotation = useRef(0);

  const panResponder = useRef(
    PanResponder.create({
      onStartShouldSetPanResponder: () => true,
      onMoveShouldSetPanResponder: () => true,

      onPanResponderGrant: () => {
        position.setOffset({
          x: (position.x as any)._value,
          y: (position.y as any)._value,
        });
        position.setValue({ x: 0, y: 0 });
      },

      onPanResponderMove: Animated.event(
        [null, { dx: position.x, dy: position.y }],
        { useNativeDriver: false }
      ),

      onPanResponderRelease: (_, gestureState) => {
        position.flattenOffset();

        const updatedElement: StoryElement = {
          ...element,
          x: (position.x as any)._value,
          y: (position.y as any)._value,
          scale: (scale as any)._value,
          rotation: (rotation as any)._value,
        };

        onUpdate(updatedElement);
      },
    })
  ).current;

  const handlePinch = useCallback(
    (newScale: number) => {
      const clampedScale = Math.max(0.5, Math.min(3, newScale));
      scale.setValue(clampedScale);
      lastScale.current = clampedScale;
    },
    [scale]
  );

  const handleRotate = useCallback(
    (newRotation: number) => {
      rotation.setValue(newRotation);
      lastRotation.current = newRotation;
    },
    [rotation]
  );

  return {
    panResponder,
    position,
    scale,
    rotation,
  };
}
ü™ù 14. HOOKS/USEMEDIAPICKER.TS
TypeScript

// src/story/hooks/useMediaPicker.ts

import { useState, useCallback } from 'react';
import * as ImagePicker from 'expo-image-picker';
import { Alert } from 'react-native';

interface MediaPickerResult {
  uri: string | null;
  type: 'image' | 'video' | null;
  error: string | null;
}

export function useMediaPicker() {
  const [loading, setLoading] = useState(false);
  const [result, setResult] = useState<MediaPickerResult>({
    uri: null,
    type: null,
    error: null,
  });

  const requestCameraPermission = async () => {
    try {
      const { status } = await ImagePicker.requestCameraPermissionsAsync();
      if (status !== 'granted') {
        Alert.alert(
          'Permiss√£o Negada',
          'Voc√™ precisa conceder permiss√£o de c√¢mera.'
        );
        return false;
      }
      return true;
    } catch (error) {
      console.error('Erro ao solicitar permiss√£o de c√¢mera:', error);
      return false;
    }
  };

  const requestGalleryPermission = async () => {
    try {
      const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();
      if (status !== 'granted') {
        Alert.alert(
          'Permiss√£o Negada',
          'Voc√™ precisa conceder permiss√£o de galeria.'
        );
        return false;
      }
      return true;
    } catch (error) {
      console.error('Erro ao solicitar permiss√£o de galeria:', error);
      return false;
    }
  };

  const pickFromCamera = useCallback(async () => {
    const hasPermission = await requestCameraPermission();
    if (!hasPermission) return;

    setLoading(true);
    try {
      const pickerResult = await ImagePicker.launchCameraAsync({
        mediaTypes: ImagePicker.MediaTypeOptions.All,
        allowsEditing: false,
        quality: 1,
      });

      if (!pickerResult.canceled && pickerResult.assets && pickerResult.assets.length > 0) {
        const asset = pickerResult.assets[0];
        setResult({
          uri: asset.uri,
          type: asset.type === 'video' ? 'video' : 'image',
          error: null,
        });
        return asset.uri;
      }
    } catch (error) {
      console.error('Erro ao capturar m√≠dia:', error);
      setResult({
        uri: null,
        type: null,
        error: 'Erro ao capturar m√≠dia',
      });
      Alert.alert('Erro', 'N√£o foi poss√≠vel capturar a m√≠dia');
    } finally {
      setLoading(false);
    }
  }, []);

  const pickFromGallery = useCallback(async () => {
    const hasPermission = await requestGalleryPermission();
    if (!hasPermission) return;

    setLoading(true);
    try {
      const pickerResult = await ImagePicker.launchImageLibraryAsync({
        mediaTypes: ImagePicker.MediaTypeOptions.All,
        allowsEditing: false,
        quality: 1,
      });

      if (!pickerResult.canceled && pickerResult.assets && pickerResult.assets.length > 0) {
        const asset = pickerResult.assets[0];
        setResult({
          uri: asset.uri,
          type: asset.type === 'video' ? 'video' : 'image',
          error: null,
        });
        return asset.uri;
      }
    } catch (error) {
      console.error('Erro ao selecionar m√≠dia:', error);
      setResult({
        uri: null,
        type: null,
        error: 'Erro ao selecionar m√≠dia',
      });
      Alert.alert('Erro', 'N√£o foi poss√≠vel selecionar a m√≠dia');
    } finally {
      setLoading(false);
    }
  }, []);

  const reset = useCallback(() => {
    setResult({
      uri: null,
      type: null,
      error: null,
    });
  }, []);

  return {
    loading,
    result,
    pickFromCamera,
    pickFromGallery,
    reset,
  };
}
üõ†Ô∏è 15. UTILS/IMAGEFILTERS.TS
TypeScript

// src/story/utils/imageFilters.ts

import { FilterType, FilterConfig } from '../types';

export const filterConfigs: Record<FilterType, FilterConfig> = {
  original: {},
  vintage: {
    sepia: 0.4,
    saturation: 0.7,
    brightness: 0.9,
    contrast: 1.1,
  },
  pb: {
    grayscale: 1,
  },
  sepia: {
    sepia: 1,
    saturation: 0.8,
  },
  vibrante: {
    saturation: 1.5,
    contrast: 1.2,
    brightness: 1.05,
  },
  frio: {
    hue: -30,
    saturation: 0.9,
    brightness: 1.1,
  },
  quente: {
    hue: 30,
    saturation: 0.8,
    brightness: 1.15,
  },
  desbotado: {
    saturation: 0.5,
    contrast: 0.8,
    brightness: 1.05,
  },
  dramatico: {
    contrast: 1.5,
    saturation: 0.9,
    brightness: 0.9,
  },
  retro: {
    sepia: 0.7,
    saturation: 0.6,
    contrast: 1.1,
    brightness: 0.95,
  },
};

export function getFilterStyle(filter: FilterType): any {
  const config = filterConfigs[filter];
  const filters: string[] = [];

  if (config.brightness) {
    filters.push(`brightness(${config.brightness})`);
  }
  if (config.contrast) {
    filters.push(`contrast(${config.contrast})`);
  }
  if (config.saturation) {
    filters.push(`saturate(${config.saturation})`);
  }
  if (config.sepia) {
    filters.push(`sepia(${config.sepia})`);
  }
  if (config.grayscale) {
    filters.push(`grayscale(${config.grayscale})`);
  }
  if (config.hue) {
    filters.push(`hue-rotate(${config.hue}deg)`);
  }
  if (config.blur) {
    filters.push(`blur(${config.blur}px)`);
  }

  return filters.length > 0 ? { filter: filters.join(' ') } : {};
}

export function applyFilter(
  imageData: ImageData,
  filter: FilterType
): ImageData {
  const config = filterConfigs[filter];
  const data = imageData.data;

  for (let i = 0; i < data.length; i += 4) {
    let r = data[i];
    let g = data[i + 1];
    let b = data[i + 2];

    // Grayscale
    if (config.grayscale) {
      const gray = 0.299 * r + 0.587 * g + 0.114 * b;
      r = g = b = gray;
    }

    // Sepia
    if (config.sepia) {
      const tr = 0.393 * r + 0.769 * g + 0.189 * b;
      const tg = 0.349 * r + 0.686 * g + 0.168 * b;
      const tb = 0.272 * r + 0.534 * g + 0.131 * b;
      r = tr;
      g = tg;
      b = tb;
    }

    // Brightness
    if (config.brightness) {
      r *= config.brightness;
      g *= config.brightness;
      b *= config.brightness;
    }

    // Clamp values
    data[i] = Math.min(255, Math.max(0, r));
    data[i + 1] = Math.min(255, Math.max(0, g));
    data[i + 2] = Math.min(255, Math.max(0, b));
  }

  return imageData;
}
üõ†Ô∏è 16. UTILS/CANVASHELPERS.TS
TypeScript

// src/story/utils/canvasHelpers.ts

import { StoryElement, TextElement, DrawElement } from '../types';

export function generateSVGPath(points: { x: number; y: number }[]): string {
  if (points.length === 0) return '';
  
  let path = `M ${points[0].x} ${points[0].y}`;
  for (let i = 1; i < points.length; i++) {
    path += ` L ${points[i].x} ${points[i].y}`;
  }
  
  return path;
}

export function smoothPath(points: { x: number; y: number }[]): string {
  if (points.length < 2) return '';
  
  let path = `M ${points[0].x} ${points[0].y}`;
  
  for (let i = 1; i < points.length - 1; i++) {
    const xc = (points[i].x + points[i + 1].x) / 2;
    const yc = (points[i].y + points[i + 1].y) / 2;
    path += ` Q ${points[i].x} ${points[i].y}, ${xc} ${yc}`;
  }
  
  const last = points[points.length - 1];
  path += ` L ${last.x} ${last.y}`;
  
  return path;
}

export function calculateBoundingBox(element: StoryElement): {
  x: number;
  y: number;
  width: number;
  height: number;
} {
  const rotation = element.rotation || 0;
  const scale = element.scale || 1;
  
  let width = 100;
  let height = 100;
  
  if (element.type === 'text') {
    const textEl = element as TextElement;
    width = textEl.width || 200;
    height = textEl.height || 50;
  }
  
  return {
    x: element.x,
    y: element.y,
    width: width * scale,
    height: height * scale,
  };
}

export function isPointInElement(
  point: { x: number; y: number },
  element: StoryElement
): boolean {
  const box = calculateBoundingBox(element);
  
  return (
    point.x >= box.x &&
    point.x <= box.x + box.width &&
    point.y >= box.y &&
    point.y <= box.y + box.height
  );
}

export function clampPosition(
  x: number,
  y: number,
  containerWidth: number,
  containerHeight: number,
  elementWidth: number,
  elementHeight: number
): { x: number; y: number } {
  return {
    x: Math.max(0, Math.min(containerWidth - elementWidth, x)),
    y: Math.max(0, Math.min(containerHeight - elementHeight, y)),
  };
}
üõ†Ô∏è 17. UTILS/GESTUREHELPERS.TS
TypeScript

// src/story/utils/gestureHelpers.ts

export function calculateDistance(
  point1: { x: number; y: number },
  point2: { x: number; y: number }
): number {
  const dx = point2.x - point1.x;
  const dy = point2.y - point1.y;
  return Math.sqrt(dx * dx + dy * dy);
}

export function calculateAngle(
  point1: { x: number; y: number },
  point2: { x: number; y: number }
): number {
  return Math.atan2(point2.y - point1.y, point2.x - point1.x) * (180 / Math.PI);
}

export function calculateScale(
  initialDistance: number,
  currentDistance: number
): number {
  return currentDistance / initialDistance;
}

export function calculateRotation(
  initialAngle: number,
  currentAngle: number
): number {
  return currentAngle - initialAngle;
}

export function normalizeAngle(angle: number): number {
  let normalized = angle % 360;
  if (normalized < 0) normalized += 360;
  return normalized;
}

export function snapToAngle(angle: number, snapIncrement: number = 15): number {
  return Math.round(angle / snapIncrement) * snapIncrement;
}

export function interpolate(
  value: number,
  inputRange: [number, number],
  outputRange: [number, number]
): number {
  const [inputMin, inputMax] = inputRange;
  const [outputMin, outputMax] = outputRange;
  
  const ratio = (value - inputMin) / (inputMax - inputMin);
  return outputMin + ratio * (outputMax - outputMin);
}

export function clamp(value: number, min: number, max: number): number {
  return Math.max(min, Math.min(max, value));
}
üõ†Ô∏è 18. UTILS/STORAGEHELPERS.TS
TypeScript

// src/story/utils/storageHelpers.ts

import AsyncStorage from '@react-native-async-storage/async-storage';
import { StoryDraft, StoryComposition } from '../types';

const DRAFTS_KEY = '@story_drafts';
const MAX_DRAFTS = 10;

export const storageHelpers = {
  async saveDraft(draft: StoryDraft): Promise<void> {
    try {
      const drafts = await this.getAllDrafts();
      const existingIndex = drafts.findIndex((d) => d.id === draft.id);

      if (existingIndex >= 0) {
        drafts[existingIndex] = {
          ...draft,
          lastModified: new Date(),
        };
      } else {
        drafts.unshift(draft);
      }

      if (drafts.length > MAX_DRAFTS) {
        drafts.pop();
      }

      await AsyncStorage.setItem(DRAFTS_KEY, JSON.stringify(drafts));
    } catch (error) {
      console.error('Erro ao salvar rascunho:', error);
      throw error;
    }
  },

  async getDraft(id: string): Promise<StoryDraft | null> {
    try {
      const drafts = await this.getAllDrafts();
      return drafts.find((d) => d.id === id) || null;
    } catch (error) {
      console.error('Erro ao obter rascunho:', error);
      return null;
    }
  },

  async getAllDrafts(): Promise<StoryDraft[]> {
    try {
      const data = await AsyncStorage.getItem(DRAFTS_KEY);
      if (!data) return [];

      const drafts = JSON.parse(data) as StoryDraft[];
      return drafts.map((draft) => ({
        ...draft,
        createdAt: new Date(draft.createdAt),
        lastModified: new Date(draft.lastModified),
      }));
    } catch (error) {
      console.error('Erro ao obter rascunhos:', error);
      return [];
    }
  },

  async deleteDraft(id: string): Promise<void> {
    try {
      const drafts = await this.getAllDrafts();
      const filtered = drafts.filter((d) => d.id !== id);
      await AsyncStorage.setItem(DRAFTS_KEY, JSON.stringify(filtered));
    } catch (error) {
      console.error('Erro ao deletar rascunho:', error);
      throw error;
    }
  },

  async clearAllDrafts(): Promise<void> {
    try {
      await AsyncStorage.removeItem(DRAFTS_KEY);
    } catch (error) {
      console.error('Erro ao limpar rascunhos:', error);
      throw error;
    }
  },

  async autoSaveDraft(composition: StoryComposition, mediaUri: string): Promise<void> {
    const draft: StoryDraft = {
      id: `draft-${Date.now()}`,
      imageUri: mediaUri,
      composition,
      privacy: {
        audience: 'amigos',
        allowReplies: true,
        allowSharing: true,
      },
      duration: 5,
      createdAt: new Date(),
      lastModified: new Date(),
    };

    await this.saveDraft(draft);
  },
};
üì¶ 19. EXEMPLO DE USO - APP.TSX
TypeScript

// App.tsx (exemplo de integra√ß√£o)

import React, { useState } from 'react';
import { View, StyleSheet, TouchableOpacity, Text } from 'react-native';
import { MaterialCommunityIcons } from '@expo/vector-icons';
import StoryCreator from './src/story/components/StoryCreator';
import { StoryComposition } from './src/story/types';

export default function App() {
  const [storyCreatorVisible, setStoryCreatorVisible] = useState(false);

  const handlePublishStory = async (
    composition: StoryComposition,
    mediaUri: string
  ) => {
    console.log('Story publicado!', { composition, mediaUri });
    
    // Aqui voc√™ faria o upload para seu backend
    // await uploadStory(composition, mediaUri);
    
    setStoryCreatorVisible(false);
  };

  return (
    <View style={styles.container}>
      <TouchableOpacity
        style={styles.createButton}
        onPress={() => setStoryCreatorVisible(true)}
      >
        <MaterialCommunityIcons name="plus" size={24} color="#fff" />
        <Text style={styles.createButtonText}>Criar Story</Text>
      </TouchableOpacity>

      <StoryCreator
        visible={storyCreatorVisible}
        onClose={() => setStoryCreatorVisible(false)}
        onPublish={handlePublishStory}
      />
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#000',
    alignItems: 'center',
    justifyContent: 'center',
  },
  createButton: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 8,
    backgroundColor: '#16a34a',
    paddingHorizontal: 24,
    paddingVertical: 16,
    borderRadius: 12,
  },
  createButtonText: {
    color: '#fff',
    fontSize: 16,
    fontWeight: '600',
  },
});
üì¶ 20. PACKAGE.JSON (DEPEND√äNCIAS NECESS√ÅRIAS)
JSON

{
  "dependencies": {
    "expo": "~50.0.0",
    "react": "18.2.0",
    "react-native": "0.73.0",
    
    "@expo/vector-icons": "^14.0.0",
    "@react-native-async-storage/async-storage": "^1.21.0",
    "@react-native-community/slider": "^4.5.2",
    
    "expo-av": "~13.10.0",
    "expo-blur": "~12.9.0",
    "expo-camera": "~14.1.0",
    "expo-file-system": "~16.0.0",
    "expo-image-picker": "~14.7.0",
    "expo-linear-gradient": "~12.7.0",
    "expo-media-library": "~15.9.0",
    
    "react-native-gesture-handler": "~2.14.0",
    "react-native-reanimated": "~3.6.0",
    "react-native-svg": "14.1.0"
  }
}
üöÄ 21. COMANDOS DE INSTALA√á√ÉO
Bash

# Instalar todas as depend√™ncias necess√°rias

# Expo packages
npx expo install expo-av expo-blur expo-camera expo-file-system expo-image-picker expo-linear-gradient expo-media-library

# Community packages
npx expo install @react-native-async-storage/async-storage @react-native-community/slider

# Gestures e anima√ß√µes
npx expo install react-native-gesture-handler react-native-reanimated react-native-svg

# Limpar cache e reinstalar
rm -rf node_modules
npm install
npx expo start -c
üìÅ 22. ESTRUTURA FINAL DE PASTAS
text

src/
‚îî‚îÄ‚îÄ story/
    ‚îú‚îÄ‚îÄ components/
    ‚îÇ   ‚îú‚îÄ‚îÄ StoryCreator.tsx          ‚úÖ
    ‚îÇ   ‚îú‚îÄ‚îÄ MediaSelector.tsx         ‚úÖ
    ‚îÇ   ‚îú‚îÄ‚îÄ StoryEditor.tsx           ‚úÖ
    ‚îÇ   ‚îÇ
    ‚îÇ   ‚îú‚îÄ‚îÄ tools/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TextTool.tsx          ‚úÖ
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DrawingTool.tsx       ‚úÖ
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FiltersTool.tsx       ‚úÖ
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StickersTool.tsx      ‚úÖ
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InteractiveTool.tsx   ‚úÖ
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CropTool.tsx          ‚úÖ
    ‚îÇ   ‚îÇ
    ‚îÇ   ‚îî‚îÄ‚îÄ ui/
    ‚îÇ       ‚îî‚îÄ‚îÄ PrivacySelector.tsx   ‚úÖ
    ‚îÇ
    ‚îú‚îÄ‚îÄ hooks/
    ‚îÇ   ‚îú‚îÄ‚îÄ useStoryEditor.ts         ‚úÖ
    ‚îÇ   ‚îú‚îÄ‚îÄ useHistoryManager.ts      ‚úÖ
    ‚îÇ   ‚îú‚îÄ‚îÄ useGestures.ts            ‚úÖ
    ‚îÇ   ‚îî‚îÄ‚îÄ useMediaPicker.ts         ‚úÖ
    ‚îÇ
    ‚îú‚îÄ‚îÄ utils/
    ‚îÇ   ‚îú‚îÄ‚îÄ imageFilters.ts           ‚úÖ
    ‚îÇ   ‚îú‚îÄ‚îÄ canvasHelpers.ts          ‚úÖ
    ‚îÇ   ‚îú‚îÄ‚îÄ gestureHelpers.ts         ‚úÖ
    ‚îÇ   ‚îî‚îÄ‚îÄ storageHelpers.ts         ‚úÖ
    ‚îÇ
    ‚îú‚îÄ‚îÄ types/
    ‚îÇ   ‚îî‚îÄ‚îÄ index.ts                  ‚úÖ
    ‚îÇ
    ‚îî‚îÄ‚îÄ styles/
        ‚îú‚îÄ‚îÄ theme.ts                  ‚úÖ
        ‚îî‚îÄ‚îÄ animations.ts             ‚úÖ
üéâ M√ìDULO COMPLETO FINALIZADO!
‚ú® O que voc√™ tem agora:
‚úÖ 22 arquivos profissionais
‚úÖ Design moderno e fluido
‚úÖ Anima√ß√µes suaves
‚úÖ Gestures naturais
‚úÖ C√≥digo limpo e organizado
‚úÖ TypeScript completo
‚úÖ Hooks customizados
‚úÖ Utilities prontos
‚úÖ Totalmente funcional

